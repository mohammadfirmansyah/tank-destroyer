/* Local Font Import - Downloaded from Google Fonts for production use */
@import url('../assets/fonts/fonts.css');

:root {
	--hud-box-size: clamp(90px, 20vw, 130px);
	--hud-box-size-compact: clamp(75px, 18vw, 100px);
	/* Default font settings */
	--font-primary: 'Rajdhani', system-ui, sans-serif;
	--font-display: 'Black Ops One', 'Impact', sans-serif;
	--font-mono: 'Orbitron', monospace;
	
	/* === RESPONSIVE TEXT SIZE VARIABLES ===
	 * Use these variables for consistent text sizing across all screens
	 * Minimum: small screens | Preferred: viewport-based | Maximum: large screens */
	--text-xs: clamp(7px, 1.5vw, 9px);
	--text-sm: clamp(8px, 1.8vw, 11px);
	--text-base: clamp(10px, 2vw, 13px);
	--text-md: clamp(11px, 2.2vw, 14px);
	--text-lg: clamp(13px, 2.5vw, 16px);
	--text-xl: clamp(16px, 3vw, 20px);
	--text-2xl: clamp(20px, 4vw, 28px);
	--text-3xl: clamp(24px, 5vw, 36px);
	
	/* === RESPONSIVE SPACING VARIABLES === */
	--space-xs: clamp(2px, 0.5vw, 4px);
	--space-sm: clamp(4px, 1vw, 8px);
	--space-md: clamp(8px, 2vw, 16px);
	--space-lg: clamp(12px, 3vw, 24px);
	--space-xl: clamp(16px, 4vw, 32px);
}

/* === MOBILE-COMPATIBLE GPU HINTS === */
/* Use minimal GPU hints that work across all mobile devices */
* {
	/* Disable tap highlight on mobile */
	-webkit-tap-highlight-color: transparent;
	/* Inherit font from parent by default */
	font-family: inherit;
}

/* Base font settings for entire document */
html {
	font-family: var(--font-primary);
}

body {
	background: linear-gradient(135deg, #5a7a50 0%, #4a6741 50%, #6b5d4f 100%);
	/* Natural terrain gradient */
	margin: 0;
	overflow: hidden;
	touch-action: none;
	font-family: var(--font-primary);
	font-weight: 500; /* Medium weight as default - not too thin */
	user-select: none;
	-webkit-user-select: none;
}

/* Canvas rendering - mobile-safe GPU hints */
/* Blocky pixel-art look (like Minecraft) - no smoothing/blur */
#gameCanvas,
#demo-canvas {
	/* 
	 * Mobile GPU Compatibility Notes:
	 * - Removed will-change:contents (causes glitches on Mali, Adreno GPUs)
	 * - Removed translateZ(0) on canvas (conflicts with some mobile browsers)
	 * - Using pixelated rendering for crisp blocky look at all scales
	 */
	image-rendering: pixelated;
	image-rendering: -moz-crisp-edges;
	image-rendering: crisp-edges;
	-ms-interpolation-mode: nearest-neighbor;
	/* Backface hidden helps prevent flickering during transitions */
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
}

/* Minimap uses smooth rendering for better visibility */
#minimap {
	image-rendering: auto;
	image-rendering: smooth;
	-webkit-backface-visibility: hidden;
	backface-visibility: hidden;
}

/* Blur effect for canvas and HUD when wave-timer is visible */
#wave-timer:not([style*="display: none"]) ~ #gameCanvas,
#wave-timer:not([style*="display: none"]) ~ .hud-top,
#wave-timer:not([style*="display: none"]) ~ .stats-panel,
#wave-timer:not([style*="display: none"]) ~ .top-right,
#wave-timer:not([style*="display: none"]) ~ #wave-indicator,
#wave-timer:not([style*="display: none"]) ~ #minimap,
#wave-timer:not([style*="display: none"]) ~ #ui-layer {
	filter: blur(8px);
	transition: filter 0.3s ease;
}

/* SPLASH SCREEN */
#splash-screen {
	position: fixed;
	inset: 0;
	background: linear-gradient(135deg, rgba(30, 25, 20, 0.98), rgba(40, 35, 30, 0.95));
	z-index: 9999;
	display: flex;
	align-items: center;
	justify-content: center;
}

#splash-screen.fade-out {
	animation: splashFadeOut 0.8s ease-out forwards;
}

@keyframes splashFadeOut {
	to {
		opacity: 0;
		visibility: hidden;
	}
}

.splash-content {
	position: relative;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	width: 100%;
	height: 100vh;
	max-width: 100%;
	overflow: hidden;
	z-index: 1;
}

/* Splash Pages */
.splash-page {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%) scale(0.8) rotateY(45deg);
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: clamp(4px, 1vh, 10px);
	opacity: 0;
	visibility: hidden;
	transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
	width: calc(100% - 40px);
	max-width: 600px;
	padding: 20px;
	box-sizing: border-box;
	filter: blur(10px);
	will-change: transform, opacity, filter, visibility;
	backface-visibility: hidden;
	-webkit-backface-visibility: hidden;
	pointer-events: none;
	z-index: 10;
}

/* Landscape mode adjustments */
@media (orientation: landscape) and (max-height: 500px) {
	.splash-page {
		width: calc(100% - 80px);
		max-width: 90vw;
		padding: 15px 40px;
		gap: clamp(4px, 1vh, 8px);
	}
}

/* Portrait mode on small screens */
@media (orientation: portrait) and (max-width: 480px) {
	.splash-page {
		width: calc(100% - 32px);
		padding: 16px;
	}
}

.splash-page.active {
	opacity: 1;
	visibility: visible;
	transform: translate(-50%, -50%) scale(1) rotateY(0deg);
	filter: blur(0);
	pointer-events: auto;
}

.splash-page.prev {
	opacity: 0;
	visibility: hidden;
	transform: translate(-50%, -50%) translateX(-50%) scale(0.8) rotateY(-45deg);
	filter: blur(10px);
}

.splash-page.next {
	transform: translate(-50%, -50%) translateX(50%) scale(0.8) rotateY(45deg);
}

/* Entrance animation for first page */
.splash-page.entrance {
	visibility: visible !important;
	animation: pageEntrance 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes pageEntrance {
	0% {
		opacity: 0;
		transform: translate(-50%, -50%) scale(0.3) rotateX(90deg);
		filter: blur(20px);
	}
	50% {
		transform: translate(-50%, -50%) scale(1.1) rotateX(-10deg);
		filter: blur(5px);
	}
	100% {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1) rotateX(0deg);
		filter: blur(0);
	}
}

/* Exit transitions - Blur Dissolve (elegant fade with blur) */
.splash-page.exit-blur-dissolve {
	animation: exitBlurDissolve 1.8s ease-in-out forwards;
}

@keyframes exitBlurDissolve {
	0% {
		opacity: 1;
		transform: scale(1);
		filter: blur(0px);
	}
	15% {
		opacity: 0.92;
		transform: scale(1.003);
		filter: blur(1px);
	}
	50% {
		opacity: 0.5;
		transform: scale(1.025);
		filter: blur(7.5px);
	}
	85% {
		opacity: 0.08;
		transform: scale(1.047);
		filter: blur(14px);
	}
	100% {
		opacity: 0;
		transform: scale(1.05);
		filter: blur(15px);
	}
}

.splash-page.enter-blur-dissolve {
	animation: enterBlurDissolve 1.8s ease-in-out forwards;
}

@keyframes enterBlurDissolve {
	0% {
		opacity: 0;
		transform: scale(0.95);
		filter: blur(15px);
	}
	15% {
		opacity: 0.08;
		transform: scale(0.953);
		filter: blur(14px);
	}
	50% {
		opacity: 0.5;
		transform: scale(0.975);
		filter: blur(7.5px);
	}
	85% {
		opacity: 0.92;
		transform: scale(0.997);
		filter: blur(1px);
	}
	100% {
		opacity: 1;
		transform: scale(1);
		filter: blur(0px);
	}
}

/* Exit transitions - Slide Left (legacy, kept for compatibility) */
.splash-page.exit-slide-left {
	animation: exitSlideLeft 0.8s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards;
}

@keyframes exitSlideLeft {
	0% {
		opacity: 1;
		transform: translateX(0) scale(1) rotateY(0);
	}
	100% {
		opacity: 0;
		transform: translateX(-120%) scale(0.7) rotateY(-30deg);
		filter: blur(8px);
	}
}

.splash-page.enter-slide-left {
	animation: enterSlideLeft 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

@keyframes enterSlideLeft {
	0% {
		opacity: 0;
		transform: translateX(120%) scale(0.7) rotateY(30deg);
		filter: blur(8px);
	}
	100% {
		opacity: 1;
		transform: translateX(0) scale(1) rotateY(0);
		filter: blur(0);
	}
}

/* Exit transitions - Cinema Reveal (dramatic cinematic effect) */
.splash-page.exit-cinema-reveal {
	animation: exitCinemaReveal 1.8s ease-in-out forwards;
}

@keyframes exitCinemaReveal {
	0% {
		opacity: 1;
		transform: scale(1);
		filter: blur(0px) brightness(1);
	}
	15% {
		opacity: 0.92;
		transform: scale(0.98);
		filter: blur(1.5px) brightness(1.04);
	}
	50% {
		opacity: 0.5;
		transform: scale(0.85);
		filter: blur(10px) brightness(1.25);
	}
	85% {
		opacity: 0.08;
		transform: scale(0.72);
		filter: blur(18px) brightness(1.46);
	}
	100% {
		opacity: 0;
		transform: scale(0.7);
		filter: blur(20px) brightness(1.5);
	}
}

.splash-page.enter-cinema-reveal {
	animation: enterCinemaReveal 1.8s ease-in-out forwards;
}

@keyframes enterCinemaReveal {
	0% {
		opacity: 0;
		transform: scale(1.4);
		filter: blur(20px) brightness(0.5);
	}
	15% {
		opacity: 0.08;
		transform: scale(1.37);
		filter: blur(18px) brightness(0.54);
	}
	50% {
		opacity: 0.5;
		transform: scale(1.2);
		filter: blur(10px) brightness(0.75);
	}
	85% {
		opacity: 0.92;
		transform: scale(1.03);
		filter: blur(1.5px) brightness(0.96);
	}
	100% {
		opacity: 1;
		transform: scale(1);
		filter: blur(0px) brightness(1);
	}
}

/* Exit transitions - Zoom Fade (legacy, kept for compatibility) */
.splash-page.exit-zoom-fade {
	animation: exitZoomFade 0.8s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards;
}

@keyframes exitZoomFade {
	0% {
		opacity: 1;
		transform: scale(1) rotateZ(0);
	}
	100% {
		opacity: 0;
		transform: scale(0.5) rotateZ(-5deg);
		filter: blur(10px);
	}
}

.splash-page.enter-zoom-fade {
	animation: enterZoomFade 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
}

@keyframes enterZoomFade {
	0% {
		opacity: 0;
		transform: scale(1.5) rotateZ(5deg);
		filter: blur(10px);
	}
	100% {
		opacity: 1;
		transform: scale(1) rotateZ(0);
		filter: blur(0);
	}
}

/* Exit transitions - Ethereal Fade (smooth zoom out without bounce) */
/* No bounce effect - uses ease-out for smooth direct zoom out */
.splash-page.exit-ethereal-fade {
	animation: exitEtherealFade 1.2s ease-out forwards;
	will-change: transform, opacity, filter, visibility;
	backface-visibility: hidden;
	-webkit-backface-visibility: hidden;
}

@keyframes exitEtherealFade {
	0% {
		opacity: 1;
		visibility: visible;
		transform: translate(-50%, -50%) scale(1);
		filter: blur(0px);
	}
	99% {
		visibility: visible;
	}
	100% {
		opacity: 0;
		visibility: hidden;
		transform: translate(-50%, -50%) scale(0.7);
		filter: blur(15px);
	}
}

/* Enter Ethereal Fade (with bounce effect for dramatic entrance) */
/* Uses bouncy cubic-bezier for overshoot effect */
.splash-page.enter-ethereal-fade {
	visibility: visible !important;
	animation: enterEtherealFade 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
	will-change: transform, opacity, filter;
	backface-visibility: hidden;
	-webkit-backface-visibility: hidden;
}

@keyframes enterEtherealFade {
	0% {
		opacity: 0;
		transform: translate(-50%, -50%) scale(0.3) rotateX(90deg);
		filter: blur(20px);
	}
	50% {
		opacity: 0.6;
		transform: translate(-50%, -50%) scale(1.1) rotateX(-10deg);
		filter: blur(5px);
	}
	100% {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1) rotateX(0deg);
		filter: blur(0px);
	}
}

/* Curtain exit effect (legacy, kept for compatibility) */
.splash-page.exit-curtain {
	animation: exitCurtain 0.8s ease-in-out forwards;
}

@keyframes exitCurtain {
	0% {
		opacity: 1;
		transform: scaleY(1);
		transform-origin: top;
	}
	100% {
		opacity: 0;
		transform: scaleY(0);
		transform-origin: top;
	}
}

/* Floating particles animation */
@keyframes floatParticle {
	0%, 100% {
		transform: translateY(0) translateX(0);
		opacity: 0.5;
	}
	25% {
		transform: translateY(-20px) translateX(10px);
		opacity: 0.8;
	}
	50% {
		transform: translateY(-10px) translateX(-5px);
		opacity: 0.4;
	}
	75% {
		transform: translateY(-25px) translateX(-10px);
		opacity: 0.7;
	}
}

/* Dot pulse animations */
.dot.pulse-out {
	animation: dotPulseOut 0.4s ease-out forwards;
}

@keyframes dotPulseOut {
	0% {
		transform: scale(1);
		background: #8bc34a;
	}
	50% {
		transform: scale(1.5);
	}
	100% {
		transform: scale(1);
		background: rgba(212, 197, 176, 0.3);
	}
}

.dot.pulse-in {
	animation: dotPulseIn 0.4s ease-out forwards;
}

@keyframes dotPulseIn {
	0% {
		transform: scale(1);
		background: rgba(212, 197, 176, 0.3);
	}
	50% {
		transform: scale(1.8);
	}
	100% {
		transform: scale(1);
		background: #8bc34a;
	}
}

/* Dramatic splash exit */
#splash-screen.dramatic-exit {
	animation: splashDramaticExit 0.8s cubic-bezier(0.55, 0.085, 0.68, 0.53) forwards;
}

@keyframes splashDramaticExit {
	0% {
		clip-path: circle(150% at 50% 50%);
		opacity: 1;
	}
	100% {
		clip-path: circle(0% at 50% 50%);
		opacity: 0;
	}
}

/* Menu entrance animation */
#overlay.menu-entrance {
	animation: menuEntrance 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes menuEntrance {
	0% {
		opacity: 0;
		transform: translateY(50px) scale(0.9);
	}
	100% {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
}

.splash-title {
	font-family: 'Black Ops One', cursive;
	font-size: clamp(28px, 7vw, 72px);
	color: #d4c5b0;
	text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.9), 0 0 30px rgba(139, 115, 85, 0.5);
	letter-spacing: clamp(2px, 1vw, 4px);
	animation: titlePulse 2s ease-in-out infinite;
	text-align: center;
	line-height: 1.1;
}

@keyframes titlePulse {

	0%,
	100% {
		text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.9), 0 0 30px rgba(139, 115, 85, 0.5);
	}

	50% {
		text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.9), 0 0 50px rgba(139, 195, 74, 0.7);
	}
}

.splash-subtitle {
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(12px, 2.5vw, 24px);
	color: #8bc34a;
	letter-spacing: clamp(2px, 1.5vw, 8px);
	font-weight: 500;
	text-transform: uppercase;
	text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.8);
}

.splash-dev {
	margin-top: 2vh;
	text-align: center;
	padding: 8px 20px;
	position: relative;
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 6px;
}

/* Remove the excessive background and effects */
.splash-dev::after {
	display: none;
}

.dev-label {
	font-family: 'Rajdhani', sans-serif;
	font-size: 10px;
	color: #8b7355;
	letter-spacing: 4px;
	font-weight: 700;
	text-transform: uppercase;
	opacity: 0.7;
	margin-bottom: 5px;

.temp-state {
	display: block;
	font-size: 10px;
	letter-spacing: 0.18em;
	text-transform: uppercase;
	color: #f8edde;
	opacity: 0.8;
}
}

.dev-branding {
	margin-bottom: 5px;
	display: flex;
	justify-content: center;
}

.dev-crest {
	position: relative;
	width: 60px;
	height: 60px;
	display: flex;
	justify-content: center;
	align-items: center;
	background: radial-gradient(circle, rgba(250, 204, 21, 0.1), transparent 70%);
}

.dev-crest-ring {
	position: absolute;
	width: 100%;
	height: 100%;
	border-radius: 50%;
	border: 1px solid rgba(212, 175, 55, 0.4);
	/* Elegant gold */
	box-shadow: 0 0 15px rgba(212, 175, 55, 0.1);
	animation: crestRotate 20s linear infinite;
	animation-play-state: paused;
}

.dev-crest-ring::after {
	content: '';
	position: absolute;
	top: -2px;
	left: 50%;
	transform: translateX(-50%);
	width: 4px;
	height: 4px;
	background: #d4af37;
	border-radius: 50%;
	box-shadow: 0 0 5px #d4af37;
}

.dev-crest-core {
	font-family: 'Rajdhani', sans-serif;
	font-weight: 700;
	font-size: 20px;
	letter-spacing: 1px;
	color: #fef3c7;
	text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
	z-index: 1;
}

.dev-crest-glow {
	display: none;
	/* Remove excessive glow */
}

.dev-name {
	font-family: 'Rajdhani', sans-serif;
	/* Cleaner, more professional font */
	font-weight: 700;
	font-size: clamp(24px, 5vw, 32px);
	letter-spacing: 0.15em;
	color: #fef3c7;
	background: linear-gradient(to bottom, #fff8e1, #d4af37);
	-webkit-background-clip: text;
	background-clip: text;
	color: transparent;
	text-transform: uppercase;
	margin: 2px 0;
	text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

.dev-alias {
	display: none;
	/* Remove alias to clean up */
}

.dev-tagline {
	font-family: 'Rajdhani', sans-serif;
	font-size: 11px;
	color: #a89070;
	letter-spacing: 0.3em;
	text-transform: uppercase;
	margin-top: 5px;
	opacity: 0.8;
	border-top: 1px solid rgba(168, 144, 112, 0.3);
	padding-top: 8px;
	width: 100%;
	max-width: 200px;
}

@keyframes crestRotate {
	from {
		transform: rotate(0deg);
	}

	to {
		transform: rotate(360deg);
	}
}

/* Play crest animation only when page 2 is active */
.splash-page.active .dev-crest-ring {
	animation-play-state: running;
}

.health-warning {
	margin-top: clamp(10px, 2vh, 20px);
	max-width: 600px;
	padding: clamp(10px, 2vh, 15px) clamp(12px, 3vw, 20px);
	background: rgba(180, 70, 40, 0.25);
	backdrop-filter: blur(10px);
	-webkit-backdrop-filter: blur(10px);
	border: 2px solid rgba(180, 70, 40, 0.5);
	border-radius: 8px;
	display: flex;
	gap: clamp(8px, 2vw, 12px);
	align-items: flex-start;
}

.warning-icon {
	font-size: clamp(24px, 6vw, 32px);
	flex-shrink: 0;
	line-height: 1;
}

.warning-text {
	font-size: clamp(10px, 2vw, 13px);
	color: #d4c5b0;
	text-align: left;
	line-height: 1.5;
}

.warning-text strong {
	color: #ff8866;
	display: block;
	margin-bottom: 4px;
}

.splash-loading {
	position: fixed;
	bottom: 50px;
	left: 50%;
	transform: translateX(-50%);
	width: 300px;
	max-width: 85%;
	z-index: 10;
}

.loading-bar {
	width: 100%;
	height: 6px;
	background: rgba(50, 42, 35, 0.8);
	border: 1px solid rgba(139, 115, 85, 0.5);
	border-radius: 3px;
	overflow: hidden;
	position: relative;
}

.loading-bar::after {
	content: '';
	position: absolute;
	top: 0;
	left: -100%;
	width: 100%;
	height: 100%;
	background: linear-gradient(90deg, transparent, #8bc34a, transparent);
	animation: loading 1.5s ease-in-out infinite;
}

@keyframes loading {
	to {
		left: 100%;
	}
}

@keyframes devAurora {
	0% {
		transform: rotate(0deg) scale(1);
		opacity: 0.7;
	}

	50% {
		transform: rotate(8deg) scale(1.05);
		opacity: 0.95;
	}

	100% {
		transform: rotate(-4deg) scale(1);
		opacity: 0.8;
	}
}

@keyframes titleGlow {
	0% {
		background-position: 0% 50%;
		text-shadow: 0 0 8px rgba(255, 230, 180, 0.4);
	}

	50% {
		background-position: 100% 50%;
		text-shadow: 0 0 14px rgba(255, 230, 180, 0.8);
	}

	100% {
		background-position: 0% 50%;
		text-shadow: 0 0 8px rgba(255, 230, 180, 0.4);
	}
}

@keyframes crestOrbit {
	from {
		transform: rotate(0deg);
	}

	to {
		transform: rotate(360deg);
	}
}

@keyframes crestPulse {
	0% {
		opacity: 0.4;
		transform: scale(0.9);
	}

	50% {
		opacity: 1;
		transform: scale(1.05);
	}

	100% {
		opacity: 0.4;
		transform: scale(0.92);
	}
}

@keyframes taglineSlide {
	0% {
		letter-spacing: 0.15em;
		opacity: 0.6;
	}

	50% {
		letter-spacing: 0.35em;
		opacity: 1;
	}

	100% {
		letter-spacing: 0.15em;
		opacity: 0.6;
	}
}

@keyframes slideInDown {
	from {
		opacity: 0;
		transform: translateY(-100%) scale(0.9) rotateX(20deg);
	}

	to {
		opacity: 1;
		transform: translateY(0) scale(1) rotateX(0deg);
	}
}

@keyframes slideOutUp {
	from {
		opacity: 1;
		transform: translateY(0) scale(1) rotateX(0deg);
	}

	to {
		opacity: 0;
		transform: translateY(-100%) scale(0.85) rotateX(-15deg);
	}
}

@keyframes slideInFromRight {
	from {
		opacity: 0;
		transform: translateX(100%) scale(0.9) rotateY(-25deg);
	}

	to {
		opacity: 1;
		transform: translateX(0) scale(1) rotateY(0deg);
	}
}

@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(20px);
	}

	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes fadeIn {
	from {
		opacity: 0;
	}

	to {
		opacity: 1;
	}
}

/* Splash Pagination */
.splash-pagination {
	display: none;
	/* Hidden - auto-advance only */
}

.dot {
	display: none;
}

.splash-hint {
	display: none;
	/* Hidden - auto-advance only */
}

@keyframes blink {

	0%,
	100% {
		opacity: 0.4;
	}

	50% {
		opacity: 1;
	}
}

.loading-text {
	margin-top: 10px;
	font-size: 12px;
	color: #8b7355;
	letter-spacing: 2px;
	font-weight: 600;
}

/* DEMO CANVAS (Homepage background) */
#demoCanvas {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	z-index: 1;
	display: none;
	opacity: 0;
	transition: opacity 1.2s ease-in;
}

#demoCanvas.active {
	display: block;
	opacity: 1;
}

canvas {
	display: block;
	width: 100%;
	height: 100%;
}

#gameCanvas {
	position: relative;
	z-index: 10;
	opacity: 0;
	/* Faster transition on mobile to prevent glitch, smoother on desktop */
	transition: opacity 0.3s ease-out, filter 0.3s ease;
	/* GPU Hardware Acceleration - Force compositing layer */
	transform: translateZ(0);
	-webkit-transform: translateZ(0);
	will-change: transform, opacity;
	/* Optimize rendering */
	image-rendering: -webkit-optimize-contrast;
	image-rendering: crisp-edges;
	/* Disable subpixel antialiasing for performance */
	-webkit-font-smoothing: none;
	backface-visibility: hidden;
	-webkit-backface-visibility: hidden;
	/* Prevent layout shifts on mobile */
	contain: layout style paint;
	/* Hide cursor during gameplay - use crosshair as fallback on non-game screens */
	cursor: none;
}

#gameCanvas.active {
	opacity: 1;
	/* Ensure cursor stays hidden during active gameplay */
	cursor: none;
}

/* Blur canvas during wave intermission */
#gameCanvas.wave-blur {
	filter: blur(4px);
}

/* UI LAYER */
#ui-layer {
	position: absolute;
	inset: 0;
	pointer-events: none;
	z-index: 20;
	padding: max(10px, env(safe-area-inset-top)) max(20px, env(safe-area-inset-right)) max(10px, env(safe-area-inset-bottom)) max(20px, env(safe-area-inset-left));
	display: flex;
	flex-direction: column;
	justify-content: space-between;
	opacity: 0;
	transition: opacity 0.5s ease-in;
}

#ui-layer.active {
	opacity: 1;
}

/* HUD TOP */
/* Wave Indicator Responsive Positioning */
#wave-indicator {
	--wave-progress: 0%;
	--wave-progress-color: #8bc34a;
	--wave-accent: #d4c5b0;
	transition: all 0.3s ease;
	background: rgba(30, 25, 20, 0.6);
	border: 3px solid rgba(139, 115, 85, 0.8);
	border-radius: 8px;
	backdrop-filter: blur(6px);
	-webkit-backdrop-filter: blur(6px);
	box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.5), inset 0 0 20px rgba(0, 0, 0, 0.3);
	padding: 10px;
	display: flex;
	flex-direction: column;
	gap: 4px;
	justify-content: space-evenly;
	align-items: stretch;
	color: #d4c5b0;
	font-family: 'Rajdhani', sans-serif;
	position: relative;
	overflow: hidden;
	min-width: 0;
	width: min(260px, 100%);
	max-width: 260px;
	isolation: isolate;
}

#wave-indicator::before {
	content: '';
	position: absolute;
	inset: 1px;
	border-radius: 8px;
	border: 1px solid rgba(255, 255, 255, 0.06);
	background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), transparent 40%);
	opacity: 0.5;
	pointer-events: none;
}

#wave-indicator>* {
	position: relative;
	z-index: 1;
}

#wave-indicator .wave-title {
	font-size: 13px;
	font-weight: 900;
	letter-spacing: 2.2px;
	text-transform: uppercase;
	text-align: center;
	color: rgba(212, 197, 176, 0.9);
	text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

#wave-indicator .wave-stat-row {
	display: flex;
	gap: 12px;
}

#wave-indicator .wave-stat {
	flex: 1;
	background: rgba(15, 12, 10, 0.45);
	border: 1px solid rgba(139, 115, 85, 0.35);
	border-radius: 8px;
	padding: 8px 6px;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 3px;
	position: relative;
	min-height: 52px;
}

#wave-indicator .wave-stat .stat-number {
	font-size: clamp(14px, 3.5vw, 20px);
	font-weight: 900;
	font-family: 'Black Ops One', monospace;
	color: var(--wave-accent);
	text-shadow: 0 0 10px rgba(0, 0, 0, 0.8), 0 0 14px var(--wave-progress-color);
	line-height: 1;
	white-space: nowrap;
}

#wave-indicator .wave-stat .stat-label {
	font-size: 8px;
	letter-spacing: 0.8px;
	color: rgba(168, 144, 112, 0.85);
	text-transform: uppercase;
	line-height: 1;
	white-space: nowrap;
}

#wave-indicator .wave-progress {
	display: flex;
	flex-direction: column;
	gap: 4px;
	margin: 0;
}

#wave-indicator .wave-progress-track {
	width: 100%;
	height: 8px;
	border-radius: 999px;
	background: rgba(20, 18, 16, 0.8);
	border: 1px solid rgba(139, 115, 85, 0.35);
	box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.8);
	overflow: hidden;
}

#wave-indicator .wave-progress-bar {
	height: 100%;
	width: var(--wave-progress, 0%);
	background: linear-gradient(90deg, var(--wave-progress-color), rgba(255, 255, 255, 0.25));
	box-shadow: 0 0 10px var(--wave-progress-color);
	transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

#wave-indicator .wave-progress-text {
	font-size: 9px;
	letter-spacing: 1px;
	color: rgba(212, 197, 176, 0.75);
	text-align: right;
}

#wave-indicator .wave-footer {
	display: flex;
	justify-content: space-between;
	font-size: 8px;
	letter-spacing: 1px;
	color: rgba(212, 197, 176, 0.7);
	text-transform: uppercase;
	margin-top: 2px;
	padding-top: 0;
}

/* Boss indicator styling - OMEGA DESTROYER HUD */
#wave-indicator.boss-indicator {
	border-color: rgba(168, 85, 247, 0.8);
	background: rgba(20, 10, 30, 0.75);
	box-shadow: 
		2px 2px 12px rgba(0, 0, 0, 0.6),
		inset 0 0 20px rgba(168, 85, 247, 0.15),
		0 0 15px rgba(168, 85, 247, 0.3);
	animation: bossIndicatorPulse 2s ease-in-out infinite;
}

@keyframes bossIndicatorPulse {
	0%, 100% { box-shadow: 2px 2px 12px rgba(0,0,0,0.6), inset 0 0 20px rgba(168,85,247,0.15), 0 0 15px rgba(168,85,247,0.3); }
	50% { box-shadow: 2px 2px 12px rgba(0,0,0,0.6), inset 0 0 25px rgba(168,85,247,0.25), 0 0 25px rgba(168,85,247,0.5); }
}

#wave-indicator .boss-title {
	color: #a855f7 !important;
	text-shadow: 0 0 8px rgba(168, 85, 247, 0.6), 0 2px 4px rgba(0, 0, 0, 0.8) !important;
	font-size: 11px;
	animation: bossTitleGlow 1.5s ease-in-out infinite;
}

@keyframes bossTitleGlow {
	0%, 100% { text-shadow: 0 0 8px rgba(168,85,247,0.6), 0 2px 4px rgba(0,0,0,0.8); }
	50% { text-shadow: 0 0 15px rgba(168,85,247,0.9), 0 2px 4px rgba(0,0,0,0.8), 0 0 25px rgba(168,85,247,0.4); }
}

#wave-indicator .boss-hp-track {
	width: 100%;
	height: 20px;
	border-radius: 6px;
	background: rgba(20, 18, 16, 0.9);
	border: 1px solid rgba(168, 85, 247, 0.4);
	box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.8);
	overflow: hidden;
	position: relative;
}

#wave-indicator .boss-hp-fill {
	height: 100%;
	background: linear-gradient(90deg, #22c55e, #4ade80);
	box-shadow: 0 0 10px currentColor;
	transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1), background 0.4s ease;
}

#wave-indicator .boss-hp-text {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	font-size: 11px;
	font-weight: 700;
	color: #ffffff;
	text-shadow: 0 1px 3px rgba(0, 0, 0, 0.9);
	white-space: nowrap;
	letter-spacing: 0.5px;
}

#wave-indicator .boss-stat-row {
	display: flex;
	gap: 8px;
}

#wave-indicator .boss-stat {
	flex: 1;
	background: rgba(15, 12, 10, 0.5);
	border: 1px solid rgba(168, 85, 247, 0.3);
	border-radius: 6px;
	padding: 4px 6px;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 2px;
}

#wave-indicator .boss-stat .stat-number {
	font-size: 12px;
	font-weight: 900;
	font-family: 'Black Ops One', monospace;
	line-height: 1;
}

#wave-indicator .boss-stat .stat-label {
	font-size: 7px;
	letter-spacing: 0.6px;
	color: rgba(168, 144, 112, 0.8);
	text-transform: uppercase;
}

#wave-indicator .boss-weapon-row {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 2px 0;
}

#wave-indicator .boss-weapon-row .stat-label {
	font-size: 8px;
	color: rgba(168, 144, 112, 0.8);
	letter-spacing: 0.5px;
}

#wave-indicator .boss-weapon-name {
	font-size: 8px;
	font-weight: 700;
	letter-spacing: 0.5px;
	text-shadow: 0 0 6px currentColor;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 80px;
}

#wave-indicator .boss-footer {
	display: flex;
	justify-content: space-between;
	font-size: 7px;
	letter-spacing: 0.8px;
	color: rgba(212, 197, 176, 0.6);
	text-transform: uppercase;
	margin-top: 2px;
}

/* Landscape mode: Position to the left of minimap */
@media (orientation: landscape) and (min-width: 768px) {
	.top-right {
		display: flex;
		flex-direction: row;
		align-items: flex-start;
		gap: 10px;
		--hud-box-size: clamp(85px, 20vw, 130px);
	}

	#wave-indicator {
		order: 1;
		margin-top: 0 !important;
		width: auto !important;
		min-width: clamp(140px, 22vw, 190px);
		max-width: 190px;
		height: var(--hud-box-size);
		min-height: var(--hud-box-size);
		max-height: var(--hud-box-size);
		display: flex;
		flex-direction: column;
		justify-content: space-between;
		padding: 6px 8px;
		gap: 2px;
	}

	#wave-indicator .wave-title {
		font-size: 11px;
		font-weight: 900;
		letter-spacing: 1.4px;
		flex-shrink: 0;
		margin: 0;
		padding: 2px 0;
	}

	#wave-indicator .wave-stat-row {
		gap: 4px;
		flex-shrink: 0;
	}

	#wave-indicator .wave-stat {
		padding: 5px 3px;
		gap: 2px;
		min-height: 36px;
	}

	#wave-indicator .wave-stat .stat-number {
		font-size: clamp(12px, 2.4vw, 15px);
		line-height: 1;
	}

	#wave-indicator .wave-stat .stat-label {
		font-size: clamp(6px, 1.2vw, 7px);
		letter-spacing: 0.4px;
		line-height: 1;
	}

	#wave-indicator .wave-progress {
		flex-shrink: 0;
		margin: 0;
	}

	#wave-indicator .wave-progress-track {
		height: 3px;
	}

	#wave-indicator .wave-progress-text {
		font-size: 7px;
		font-weight: 700;
		margin-top: 1px;
	}

	#wave-indicator .wave-footer {
		font-size: 8px;
		font-weight: 700;
		letter-spacing: 0.7px;
		flex-shrink: 0;
		margin-top: 0;
		padding: 2px 0;
	}

	/* Boss indicator in landscape - auto height to fit all content */
	#wave-indicator.boss-indicator {
		height: auto !important;
		min-height: auto !important;
		max-height: none !important;
		padding: 6px 8px;
		gap: 3px;
	}

	#wave-indicator.boss-indicator .boss-title {
		font-size: 9px;
		padding: 1px 0;
	}

	#wave-indicator.boss-indicator .boss-hp-track {
		height: 14px;
		display: flex;
		align-items: center;
		position: relative;
	}

	#wave-indicator.boss-indicator .boss-hp-text {
		font-size: 8px;
		line-height: 14px;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	#wave-indicator.boss-indicator .boss-stat-row {
		gap: 6px;
	}

	#wave-indicator.boss-indicator .boss-stat {
		padding: 4px 6px;
		min-height: 32px;
	}

	#wave-indicator.boss-indicator .boss-stat .stat-number {
		font-size: 10px;
	}

	#wave-indicator.boss-indicator .boss-stat .stat-label {
		font-size: 6px;
	}

	#wave-indicator.boss-indicator .boss-turret-row {
		padding: 4px 6px !important;
	}

	#wave-indicator.boss-indicator .boss-ultimate-row {
		padding: 4px 8px !important;
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	#wave-indicator.boss-indicator .boss-footer {
		font-size: 6px;
		margin-top: 1px;
	}

	.minimap-box {
		order: 2;
		width: var(--hud-box-size) !important;
		height: var(--hud-box-size) !important;
	}

	#pause-btn {
		order: 3;
		width: clamp(38px, 8vw, 50px);
		height: clamp(38px, 8vw, 50px);
		font-size: clamp(14px, 3vw, 18px);
	}
}

/* Portrait mode: Wave indicator below minimap, same height as minimap */
@media (orientation: portrait),
(max-width: 767px) {
	.hud-top {
		padding: 8px;
		gap: 8px;
		align-items: stretch;
		/* Make both sides same height */
	}

	.stats-panel {
		width: clamp(150px, 45vw, 220px);
		max-width: 45%;
		display: flex;
		flex-direction: column;
	}

	.top-right {
		display: flex !important;
		flex-direction: column;
		gap: 8px !important;
		align-self: stretch;
		width: clamp(150px, 45vw, 220px);
		max-width: 45%;
		margin-left: auto;
		position: relative;
		--hud-box-size: var(--hud-box-size-compact);
		/* Portrait layout: wave-indicator → minimap → pause-btn (vertical stack) */
		align-items: flex-end;
	}

	.minimap-box {
		/* Portrait: Minimap below wave-indicator, aligned to right */
		order: 1;
		align-self: flex-end;
		width: var(--hud-box-size) !important;
		height: var(--hud-box-size) !important;
		aspect-ratio: 1 / 1;
		margin-top: 0;
	}

	#pause-btn {
		/* Portrait: Pause button below minimap, aligned to right */
		order: 2;
		align-self: flex-end;
		width: 36px;
		height: 36px;
		font-size: 14px;
	}

	#wave-indicator {
		/* Portrait: Wave indicator at top, full width */
		order: 0;
		width: 100%;
		flex: 0 0 auto;
		height: auto !important;
		min-height: 0;
		max-height: none;
		max-width: none;
		margin: 0 !important;
		position: relative !important;
		padding: 12px;
		display: flex;
		flex-direction: column;
		justify-content: center;
		gap: 6px;
	}

	#wave-indicator .wave-stat .stat-number {
		font-size: clamp(12px, 3vw, 14px);
		line-height: 1;
	}

	#wave-indicator .wave-stat .stat-label {
		font-size: 6px;
		letter-spacing: 0.2px;
		line-height: 1;
		word-break: keep-all;
		white-space: nowrap;
		text-align: center;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	#wave-indicator .wave-title {
		font-size: 10px;
		letter-spacing: 1.5px;
	}

	#wave-indicator .wave-footer {
		font-size: 6px;
		letter-spacing: 0.3px;
		white-space: nowrap;
		gap: 4px;
	}

	#wave-indicator .wave-footer span {
		white-space: nowrap;
	}

	#wave-indicator .wave-progress-text {
		font-size: 7px;
	}

	#wave-indicator .wave-stat {
		min-height: 40px;
		padding: 5px 4px;
	}
}

.hud-top {
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
	width: 100%;
	padding: 10px;
	pointer-events: auto;
	transition: opacity 0.3s ease, filter 0.3s ease;
}

.hud-top.hud-ghost,
.stats-panel.hud-ghost,
.top-right.hud-ghost {
	opacity: 0.28;
	filter: saturate(0.75);
	transition: opacity 0.3s ease, filter 0.3s ease;
}

/* STATS PANEL */
.stats-panel {
	display: flex;
	flex-direction: column;
	gap: 4px;
	width: clamp(150px, 18vw, 220px);
	background: rgba(70, 60, 50, 0.92);
	/* Dark earthy brown */
	padding: clamp(6px, 1.2vh, 10px);
	border-radius: 8px;
	border: 2px solid rgba(139, 115, 85, 0.6);
	/* Tan border */
	backdrop-filter: blur(4px);
	box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.5);
	transition: opacity 0.3s ease, filter 0.3s ease;
}

.bar-group {
	width: 100%;
	/* Smooth transitions for bar visibility and position changes */
	transition: opacity 0.4s ease, max-height 0.4s ease, margin-top 0.4s ease, transform 0.3s ease;
	max-height: 60px;
	overflow: hidden;
}

/* Hidden state for bar groups - smooth fade out and collapse */
.bar-group.bar-hidden {
	opacity: 0;
	max-height: 0;
	margin-top: 0 !important;
	pointer-events: none;
	transform: translateY(-5px);
}

/* Visible state for bar groups - smooth fade in and expand */
.bar-group.bar-visible {
	opacity: 1;
	max-height: 60px;
	transform: translateY(0);
}

.bar-label {
	font-size: clamp(11px, 2vw, 14px);
	font-weight: 800;
	color: #d4c5b0;
	/* Light tan text */
	letter-spacing: 0.5px;
	margin-bottom: 2px;
	display: flex;
	justify-content: space-between;
}

.bar-frame {
	width: 100%;
	height: clamp(8px, 2vh, 14px);
	background: rgba(30, 25, 20, 0.8);
	/* Dark brown background */
	border: 1px solid rgba(139, 115, 85, 0.5);
	/* Tan border */
	border-radius: 2px;
	overflow: hidden;
	position: relative;
}

.bar-fill {
	height: 100%;
	transition: width 0.4s cubic-bezier(0.25, 0.1, 0.25, 1);
}

.bar-value {
	position: absolute;
	inset: 0;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: clamp(9px, 1.5vw, 12px);
	font-weight: bold;
	color: white;
	text-shadow: 1px 1px 1px black;
	z-index: 2;
	line-height: 1;
	text-align: center;
}

.hp-fill {
	background: linear-gradient(90deg, #16a34a, #4ade80);
	transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.armor-fill {
	background: linear-gradient(90deg, #0ea5e9, #38bdf8);
	transition: width 0.45s cubic-bezier(0.4, 0, 0.2, 1);
}

.en-fill {
	background: linear-gradient(90deg, #0891b2, #22d3ee);
	transition: width 0.35s cubic-bezier(0.25, 0.1, 0.25, 1), background 0.3s ease;
}

.ks-fill {
	background: linear-gradient(90deg, #d97706, #fbbf24);
	transition: width 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.weapon-info {
	margin-top: 4px;
	font-family: 'Black Ops One', cursive;
	font-size: clamp(14px, 2vw, 20px);
	/* Reduced max size for better fit */
	color: #f0e6d2;
	/* Light tan text */
	text-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
	text-align: left;
	background: linear-gradient(135deg, #4a6741, #5a7a50);
	/* Military green */
	padding: 4px 8px;
	border-radius: 4px;
	border: 2px solid #6b8055;
	box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.15), 0 2px 6px rgba(0, 0, 0, 0.4);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 100%;
}

/* Passive Item Indicators (dmgmult, critical, etc.) - Compact 2-letter icon + percentage */
.passive-indicators {
	display: flex;
	flex-wrap: wrap;
	gap: 3px;
	margin-top: 4px;
	max-width: 100%;
}

.passive-indicator {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 3px;
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(9px, 1.6vw, 11px);
	font-weight: 700;
	padding: 2px 4px 2px 2px;
	border-radius: 3px;
	border: 1px solid;
	text-transform: uppercase;
	letter-spacing: 0.02em;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
	line-height: 1;
}

.passive-percent {
	font-weight: 800;
	line-height: 1;
	display: flex;
	align-items: center;
}

/* 2-letter icon style matching item drops - HEXAGON shape */
.passive-icon-text {
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(7px, 1.3vw, 9px);
	font-weight: 900;
	letter-spacing: 0;
	padding: 0;
	width: 16px;
	height: 18px;
	/* Use flexbox for perfect centering */
	display: flex;
	justify-content: center;
	align-items: center;
	/* Adjust text position to compensate for hexagon clip visual center */
	padding-top: 1px;
	line-height: 1;
	text-align: center;
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.7);
	background: linear-gradient(135deg, rgba(255,255,255,0.2), rgba(0,0,0,0.3));
	border: none;
	position: relative;
	/* Hexagon shape using clip-path */
	clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
	/* Fallback for older browsers */
	border-radius: 0;
}

/* Hexagon border effect using pseudo-element */
.passive-icon-text::before {
	content: '';
	position: absolute;
	top: -1px;
	left: -1px;
	right: -1px;
	bottom: -1px;
	background: currentColor;
	clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
	z-index: -1;
	opacity: 0.7;
}

/* Inner hexagon background */
.passive-icon-text::after {
	content: '';
	position: absolute;
	top: 1px;
	left: 1px;
	right: 1px;
	bottom: 1px;
	background: linear-gradient(145deg, rgba(40, 35, 30, 0.95), rgba(20, 18, 15, 0.98));
	clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
	z-index: -1;
}

.passive-indicator.dmgmult {
	background: linear-gradient(135deg, rgba(245, 158, 11, 0.3), rgba(217, 119, 6, 0.4));
	border-color: rgba(245, 158, 11, 0.7);
	color: #fbbf24;
}

.passive-indicator.critical {
	background: linear-gradient(135deg, rgba(220, 38, 38, 0.3), rgba(185, 28, 28, 0.4));
	border-color: rgba(220, 38, 38, 0.7);
	color: #f87171;
}

.passive-indicator.cooling {
	background: linear-gradient(135deg, rgba(34, 211, 238, 0.3), rgba(6, 182, 212, 0.4));
	border-color: rgba(34, 211, 238, 0.7);
	color: #22d3ee;
}

.passive-indicator.lifesteal {
	background: linear-gradient(135deg, rgba(251, 113, 133, 0.3), rgba(244, 63, 94, 0.4));
	border-color: rgba(251, 113, 133, 0.7);
	color: #fb7185;
}

/* Passive Icon Shapes - Pure CSS icons replacing emojis */
.passive-icon-shape {
	display: inline-block;
	width: 10px;
	height: 10px;
	position: relative;
}

/* Damage icon - crossed swords */
.dmg-icon {
	background: linear-gradient(45deg, transparent 40%, currentColor 40%, currentColor 60%, transparent 60%),
	            linear-gradient(-45deg, transparent 40%, currentColor 40%, currentColor 60%, transparent 60%);
	transform: rotate(0deg);
}

/* Critical icon - star burst */
.crit-icon {
	clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
	background: currentColor;
}

/* Cooling icon - snowflake */
.cool-icon::before,
.cool-icon::after {
	content: '';
	position: absolute;
	left: 50%;
	top: 50%;
	width: 2px;
	height: 100%;
	background: currentColor;
	transform: translate(-50%, -50%);
}

.cool-icon::after {
	transform: translate(-50%, -50%) rotate(60deg);
}

.cool-icon {
	background: linear-gradient(to bottom, transparent 45%, currentColor 45%, currentColor 55%, transparent 55%);
}

/* Lifesteal icon - blood drop */
.vamp-icon {
	clip-path: polygon(50% 0%, 80% 40%, 80% 70%, 50% 100%, 20% 70%, 20% 40%);
	background: currentColor;
}

.passive-icon {
	font-size: clamp(10px, 2vw, 14px);
}

/* TOP RIGHT CONTAINER */
.top-right {
	display: flex;
	align-items: flex-start;
	gap: 15px;
	transition: opacity 0.3s ease, filter 0.3s ease;
}

/* MINIMAP */
.minimap-box {
	width: var(--hud-box-size);
	height: var(--hud-box-size);
	border: 3px solid rgba(139, 115, 85, 0.8);
	/* Tan border */
	background: rgba(30, 25, 20, 0.6);
	/* Dark brown background */
	border-radius: 8px;
	backdrop-filter: blur(6px);
	box-shadow: 2px 2px 12px rgba(0, 0, 0, 0.5), inset 0 0 20px rgba(0, 0, 0, 0.3);
}

/* PAUSE BUTTON */
.pause-btn {
	width: 40px;
	height: 40px;
	background: rgba(70, 60, 50, 0.95);
	/* Dark brown */
	border: 2px solid rgba(139, 115, 85, 0.8);
	/* Tan border */
	border-radius: 8px;
	color: #d4c5b0;
	/* Light tan text */
	font-weight: 600;
	font-family: var(--font-primary);
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	transition: all 0.2s;
	pointer-events: auto;
	box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.5);
	backdrop-filter: blur(4px);
}

.pause-btn:hover {
	background: rgba(90, 80, 70, 1);
	/* Lighter brown */
	border-color: rgba(139, 115, 85, 1);
	transform: scale(1.05);
}

.pause-btn:active {
	transform: scale(0.92);
	filter: brightness(0.8);
	box-shadow: 0 1px 5px rgba(0, 0, 0, 0.6), inset 0 2px 4px rgba(0, 0, 0, 0.3);
	transition: transform 0.08s ease, filter 0.08s ease, box-shadow 0.08s ease;
}

/* CONTROLS AREA */
.controls-area {
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	width: 100%;
	height: auto;
	pointer-events: none;
	z-index: 50;
	transition: opacity 0.2s ease;
}

/* Default Landscape Layout */
.joystick-container {
	position: absolute;
	bottom: 36px;
	display: flex;
	flex-direction: row;
	align-items: center;
	gap: 16px;
	pointer-events: auto;
}

/* Move joystick - bottom left */
.joystick-container.left-control {
	left: 32px;
}

/* Aim joystick - bottom right */
.joystick-container.right-control {
	right: 32px;
	flex-direction: row-reverse;
}

.ability-slot {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
}

.joystick-base {
	width: clamp(85px, 18vw, 135px);
	height: clamp(85px, 18vw, 135px);
	max-width: 130px;
	max-height: 140px;
	background: rgba(60, 50, 40, 0.7);
	/* Dark brown */
	border: 3px dashed rgba(139, 115, 85, 0.6);
	/* Tan dashed border */
	border-radius: 50%;
	position: relative;
	flex-shrink: 0;
	backdrop-filter: blur(2px);
	box-shadow: 2px 2px 15px rgba(0, 0, 0, 0.5), inset 0 0 20px rgba(0, 0, 0, 0.3);
	display: flex;
	align-items: center;
	justify-content: center;
}

.joystick-label {
	position: absolute;
	top: 15%;
	left: 50%;
	transform: translateX(-50%);
	width: 100%;
	text-align: center;
	color: rgba(34, 211, 238, 0.7);
	font-size: clamp(7px, 1.3vw, 10px);
	font-weight: bold;
	letter-spacing: 2px;
	pointer-events: none;
	z-index: 1;
	text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.9);
	text-transform: uppercase;
}

.joystick-label-red {
	color: rgba(248, 113, 113, 0.7);
}

.joystick-stick {
	width: 40%;
	height: 40%;
	border-radius: 50%;
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	pointer-events: none;
	box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
	transition: transform 0.05s ease-out;
}

.joy-left .joystick-stick {
	background: rgba(74, 103, 65, 0.8);
	/* Military green */
	border: 3px solid #5a7a50;
	box-shadow: 0 0 12px rgba(90, 122, 80, 0.6);
}

.joy-right .joystick-stick {
	background: rgba(180, 70, 40, 0.8);
	/* Dark orange-red */
	border: 3px solid #b44628;
	box-shadow: 0 0 12px rgba(180, 70, 40, 0.6);
}

body.touch-controls-hidden .controls-area {
	opacity: 0;
	pointer-events: none;
}

body.touch-controls-hidden .joystick-container {
	visibility: hidden;
}

@keyframes missionBackdrop {
	0% {
		opacity: 0;
		filter: blur(12px);
	}

	100% {
		opacity: 1;
		filter: blur(0);
	}
}

@keyframes missionContent {
	0% {
		opacity: 0;
		transform: translateY(50px) scale(0.9);
	}

	60% {
		opacity: 1;
		transform: translateY(-10px) scale(1.05);
	}

	100% {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
}

/* ABILITY BUTTONS */
.ability-btn {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	text-align: center;
	text-transform: uppercase;
	gap: 3px;
	width: clamp(75px, 16vw, 120px);
	height: clamp(52px, 11vw, 78px);
	min-width: clamp(75px, 16vw, 120px);
	min-height: clamp(52px, 11vw, 78px);
	max-width: clamp(75px, 16vw, 120px);
	max-height: clamp(52px, 11vw, 78px);
	border-radius: 16px;
	border: 2px solid rgba(255, 255, 255, 0.15);
	box-shadow: 0 12px 20px rgba(0, 0, 0, 0.5);
	opacity: 0.4;
	transition: transform 0.18s ease, filter 0.18s ease, opacity 0.18s ease;
	font-family: 'Black Ops One', sans-serif;
	color: #f8edde;
	letter-spacing: 0.1em;
	background: rgba(15, 18, 24, 0.55);
	position: relative;
	overflow: hidden;
	pointer-events: none;
	cursor: default;
}

.ability-btn .ability-main {
	font-size: clamp(11px, 2vw, 14px);
	letter-spacing: 0.25em;
	font-weight: 900;
	color: inherit;
}

.ability-btn .ability-sub {
	font-size: clamp(8px, 1.6vw, 11px);
	font-weight: 800;
	letter-spacing: 0.15em;
	color: inherit;
	opacity: 0.85;
}

.ability-btn.active-state {
	opacity: 1;
	pointer-events: auto;
	cursor: pointer;
}

.ability-btn.active-state:hover {
	transform: translateY(-3px) scale(1.02);
}

.turbo-btn {
	background: radial-gradient(circle at 30% 30%, rgba(251, 146, 60, 0.95), rgba(147, 51, 22, 0.95));
	border-color: rgba(251, 144, 75, 0.55);
	color: #fffaf0;
}

.turbo-btn.turbo-ready {
	filter: drop-shadow(0 0 18px rgba(251, 146, 60, 0.55));
	opacity: 1;
	pointer-events: auto;
	cursor: pointer;
}

.turbo-btn.turbo-active {
	background: radial-gradient(circle at 20% 30%, rgba(255, 241, 138, 0.95), rgba(251, 146, 60, 0.95));
	animation: pulseAbilityWarm 1.15s infinite;
	filter: drop-shadow(0 0 25px rgba(251, 191, 36, 0.8));
}

.turbo-btn.turbo-disabled {
	opacity: 0.25;
	filter: grayscale(0.6);
	pointer-events: none;
}

.ult-btn {
	background: radial-gradient(circle at 30% 25%, rgba(63, 178, 204, 0.65), rgba(14, 23, 43, 0.92));
	border-color: rgba(56, 189, 248, 0.4);
	color: #e0fbff;
}

.ult-btn.ult-ready {
	opacity: 1;
	filter: drop-shadow(0 0 16px rgba(56, 189, 248, 0.45));
	pointer-events: auto;
	cursor: pointer;
}

.ult-btn.ult-active {
	animation: pulseAbilityCool 1.2s infinite;
	filter: drop-shadow(0 0 25px rgba(59, 130, 246, 0.55));
	opacity: 1;
}

.ult-btn.ult-channel {
	background: radial-gradient(circle at 40% 35%, rgba(56, 189, 248, 0.85), rgba(15, 23, 42, 0.95));
	border-color: rgba(190, 242, 100, 0.55);
}

.ult-btn.ult-beam {
	background: radial-gradient(circle at 60% 50%, rgba(14, 165, 233, 0.85), rgba(8, 47, 73, 0.9));
	border-color: rgba(125, 211, 252, 0.6);
}

.ult-btn.ult-disabled {
	opacity: 0.3;
	filter: grayscale(0.4);
}

/* ABILITY BUTTONS - PORTRAIT MODE */
@media (orientation: portrait) {
	.ability-btn {
		width: clamp(60px, 13vw, 90px);
		height: clamp(42px, 9vw, 60px);
		min-width: clamp(60px, 13vw, 90px);
		min-height: clamp(42px, 9vw, 60px);
		max-width: clamp(60px, 13vw, 90px);
		max-height: clamp(42px, 9vw, 60px);
		gap: 2px;
		border-radius: 12px;
	}
	
	.ability-btn .ability-main {
		font-size: clamp(6px, 2vw, 9px);
		letter-spacing: 0.1em;
	}
	
	.ability-btn .ability-sub {
		font-size: clamp(5px, 1.5vw, 7px);
		letter-spacing: 0.08em;
	}
}

/* OVERLAYS */
#overlay,
#gameover-screen,
#victory-screen {
	position: absolute;
	inset: 0;
	background: rgba(20, 18, 15, 0.35);
	backdrop-filter: blur(4px);
	-webkit-backdrop-filter: blur(4px);
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	z-index: 100;
	padding: clamp(15px, 3vh, 30px) clamp(15px, 4vw, 30px);
	text-align: center;
	transition: opacity 0.6s ease-out, transform 0.6s ease-out;
	transform-origin: center;
	overflow-y: auto;
}

/* Victory Screen specific styles */
#victory-screen {
	background: rgba(0, 0, 0, 0.5);
	backdrop-filter: blur(20px) brightness(1.2) saturate(1.3);
	-webkit-backdrop-filter: blur(20px) brightness(1.2) saturate(1.3);
	overflow: hidden;
}

/* Victory content container */
#victory-screen .victory-content {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	position: relative;
	z-index: 5;
	gap: clamp(10px, 2vh, 20px);
}

/* Animated sparkles background */
#victory-screen .victory-sparkles {
	position: absolute;
	inset: 0;
	overflow: hidden;
	pointer-events: none;
}

#victory-screen .victory-sparkles::before,
#victory-screen .victory-sparkles::after {
	content: '✦ ✧ ★ ✦ ✧ ★ ✦ ✧ ★ ✦ ✧ ★';
	position: absolute;
	width: 200%;
	font-size: 2rem;
	color: rgba(255, 215, 0, 0.3);
	letter-spacing: 50px;
	animation: sparkleFloat 20s linear infinite;
}

#victory-screen .victory-sparkles::before {
	top: 20%;
	left: -50%;
}

#victory-screen .victory-sparkles::after {
	top: 60%;
	left: -50%;
	animation-delay: -10s;
	animation-direction: reverse;
}

@keyframes sparkleFloat {
	0% { transform: translateX(0); }
	100% { transform: translateX(50%); }
}

/* Golden particle background effect */
#victory-screen::before {
	content: '';
	position: absolute;
	inset: 0;
	background: 
		radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.2) 0%, transparent 30%),
		radial-gradient(circle at 80% 70%, rgba(255, 180, 0, 0.15) 0%, transparent 35%),
		radial-gradient(circle at 50% 50%, rgba(255, 200, 0, 0.1) 0%, transparent 50%);
	animation: victoryGoldenShimmer 4s ease-in-out infinite;
	pointer-events: none;
}

@keyframes victoryGoldenShimmer {
	0%, 100% { opacity: 0.6; transform: scale(1); }
	50% { opacity: 1; transform: scale(1.05); }
}

/* Spotlight effect - static position, only opacity pulsing */
#victory-screen::after {
	content: '';
	position: absolute;
	top: -50%;
	left: 50%;
	width: 100%;
	height: 200%;
	background: linear-gradient(180deg, 
		rgba(255, 215, 0, 0.2) 0%, 
		rgba(255, 215, 0, 0.08) 30%,
		transparent 60%);
	transform: translateX(-50%);
	animation: victorySpotlight 8s ease-in-out infinite;
	pointer-events: none;
}

@keyframes victorySpotlight {
	0%, 100% { opacity: 0.5; }
	50% { opacity: 0.8; }
}

/* Victory badge container */
#victory-screen .victory-badge {
	position: relative;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Light rays behind trophy */
#victory-screen .victory-rays {
	position: absolute;
	width: clamp(200px, 50vw, 400px);
	height: clamp(200px, 50vw, 400px);
	background: conic-gradient(
		from 0deg,
		transparent 0deg,
		rgba(255, 215, 0, 0.3) 10deg,
		transparent 20deg,
		transparent 30deg,
		rgba(255, 215, 0, 0.3) 40deg,
		transparent 50deg,
		transparent 60deg,
		rgba(255, 215, 0, 0.3) 70deg,
		transparent 80deg,
		transparent 90deg,
		rgba(255, 215, 0, 0.3) 100deg,
		transparent 110deg,
		transparent 120deg,
		rgba(255, 215, 0, 0.3) 130deg,
		transparent 140deg,
		transparent 150deg,
		rgba(255, 215, 0, 0.3) 160deg,
		transparent 170deg,
		transparent 180deg,
		rgba(255, 215, 0, 0.3) 190deg,
		transparent 200deg,
		transparent 210deg,
		rgba(255, 215, 0, 0.3) 220deg,
		transparent 230deg,
		transparent 240deg,
		rgba(255, 215, 0, 0.3) 250deg,
		transparent 260deg,
		transparent 270deg,
		rgba(255, 215, 0, 0.3) 280deg,
		transparent 290deg,
		transparent 300deg,
		rgba(255, 215, 0, 0.3) 310deg,
		transparent 320deg,
		transparent 330deg,
		rgba(255, 215, 0, 0.3) 340deg,
		transparent 350deg,
		transparent 360deg
	);
	border-radius: 50%;
	animation: raysRotate 20s linear infinite;
	opacity: 0.7;
	z-index: 1;
}

@keyframes raysRotate {
	0% { transform: rotate(0deg); }
	100% { transform: rotate(360deg); }
}

#victory-screen .victory-trophy {
	font-size: clamp(4rem, 15vw, 8rem);
	animation: trophyBounce 1.2s ease-in-out infinite, trophyGlow 2s ease-in-out infinite alternate;
	filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.9));
	position: relative;
	z-index: 2;
}

@keyframes trophyBounce {
	0%, 100% { transform: translateY(0) scale(1); }
	20% { transform: translateY(-15px) scale(1.08); }
	40% { transform: translateY(-5px) scale(1.02); }
	60% { transform: translateY(-10px) scale(1.05); }
	80% { transform: translateY(-3px) scale(1.01); }
}

@keyframes trophyGlow {
	0% { 
		filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.9)) 
		        drop-shadow(0 0 60px rgba(255, 180, 0, 0.5))
		        drop-shadow(0 0 10px rgba(255, 255, 255, 0.8));
	}
	100% { 
		filter: drop-shadow(0 0 50px rgba(255, 215, 0, 1)) 
		        drop-shadow(0 0 100px rgba(255, 200, 0, 0.8)) 
		        drop-shadow(0 0 150px rgba(255, 150, 0, 0.5))
		        drop-shadow(0 0 15px rgba(255, 255, 255, 1));
	}
}

/* Victory title styling */
#victory-screen .victory-title {
	font-size: clamp(2.5rem, 10vw, 5rem) !important;
	color: #ffd700 !important;
	text-shadow: 
		0 0 20px #ffd700, 
		0 0 40px #ff8c00,
		0 0 60px rgba(255, 150, 0, 0.5),
		0 4px 8px rgba(0,0,0,0.5) !important;
	margin: 0 !important;
	animation: victoryTitlePulse 2s ease-in-out infinite alternate, victoryTitleFloat 3s ease-in-out infinite;
	position: relative;
	z-index: 2;
}

@keyframes victoryTitleFloat {
	0%, 100% { transform: translateY(0) scale(1); }
	50% { transform: translateY(-8px) scale(1.02); }
}

@keyframes victoryTitlePulse {
	from { 
		text-shadow: 0 0 20px #ffd700, 0 0 40px #ff8c00, 0 4px 8px rgba(0,0,0,0.5);
		filter: brightness(1);
		letter-spacing: 0;
	}
	to { 
		text-shadow: 0 0 40px #ffd700, 0 0 80px #ff8c00, 0 0 120px #ffcc00, 0 6px 12px rgba(0,0,0,0.6);
		filter: brightness(1.3);
		letter-spacing: 3px;
	}
}

/* Victory subtitle */
#victory-screen .victory-subtitle {
	font-size: clamp(1rem, 3vw, 1.5rem);
	color: #22c55e;
	text-shadow: 0 0 15px rgba(34, 197, 94, 0.6);
	animation: subtitleSlide 0.8s ease-out forwards, subtitleGlow 3s ease-in-out infinite 1s;
	opacity: 0;
	transform: translateY(-20px);
	animation-delay: 0.3s;
	position: relative;
	z-index: 2;
	margin: 0;
}

@keyframes subtitleSlide {
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes subtitleGlow {
	0%, 100% { text-shadow: 0 0 10px rgba(34, 197, 94, 0.5); }
	50% { text-shadow: 0 0 25px rgba(34, 197, 94, 0.8), 0 0 40px rgba(34, 197, 94, 0.4); }
}

/* Victory stats container */
#victory-screen .victory-stats {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: clamp(8px, 1.5vh, 15px);
	margin: clamp(10px, 2vh, 20px) 0;
	animation: statsSlideIn 0.8s ease-out forwards;
	animation-delay: 0.5s;
	opacity: 0;
}

@keyframes statsSlideIn {
	0% {
		opacity: 0;
		transform: translateY(30px);
	}
	100% {
		opacity: 1;
		transform: translateY(0);
	}
}

#victory-screen .victory-stat {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 4px;
	padding: clamp(8px, 1.5vh, 12px) clamp(20px, 5vw, 40px);
	background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 150, 0, 0.1));
	border: 1px solid rgba(255, 215, 0, 0.3);
	border-radius: 12px;
	backdrop-filter: blur(5px);
}

#victory-screen .stat-label {
	font-size: clamp(0.7rem, 2vw, 0.9rem);
	color: rgba(255, 215, 0, 0.7);
	letter-spacing: 2px;
	text-transform: uppercase;
}

#victory-screen .stat-value {
	font-size: clamp(1.3rem, 4vw, 2rem);
	color: #facc15;
	font-weight: bold;
	text-shadow: 0 0 15px rgba(250, 204, 21, 0.6);
	animation: scoreShine 2s ease-in-out infinite;
}

@keyframes scoreShine {
	0%, 100% { text-shadow: 0 0 10px rgba(250, 204, 21, 0.5); }
	50% { text-shadow: 0 0 25px rgba(250, 204, 21, 0.9), 0 0 40px rgba(255, 215, 0, 0.5); }
}

/* Victory button container */
#victory-screen .victory-btn-container {
	margin-top: clamp(10px, 2vh, 20px);
	animation: victoryButtonPop 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
	opacity: 0;
	transform: scale(0.5);
	animation-delay: 1s;
}

@keyframes victoryButtonPop {
	to {
		opacity: 1;
		transform: scale(1);
	}
}

/* Victory home button */
#victory-screen .victory-home-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 10px;
	padding: clamp(12px, 2vh, 18px) clamp(25px, 5vw, 40px);
	background: linear-gradient(135deg, #d4af37 0%, #ffd700 50%, #d4af37 100%);
	color: #1a1a2e;
	font-size: clamp(1rem, 3vw, 1.2rem);
	font-weight: bold;
	letter-spacing: 1px;
	border: 3px solid #b8860b;
	border-radius: 12px;
	cursor: pointer;
	transition: all 0.3s ease;
	box-shadow: 
		0 4px 15px rgba(212, 175, 55, 0.4),
		0 0 30px rgba(255, 215, 0, 0.2),
		inset 0 1px 0 rgba(255, 255, 255, 0.3);
	text-transform: uppercase;
	position: relative;
	overflow: hidden;
}

#victory-screen .victory-home-btn::before {
	content: '';
	position: absolute;
	top: 0;
	left: -100%;
	width: 100%;
	height: 100%;
	background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
	animation: buttonShine 3s ease-in-out infinite;
}

@keyframes buttonShine {
	0%, 100% { left: -100%; }
	50% { left: 100%; }
}

#victory-screen .victory-home-btn .btn-icon {
	font-size: 1.2em;
}

#victory-screen .victory-home-btn:hover {
	transform: scale(1.05) translateY(-2px);
	box-shadow: 
		0 8px 25px rgba(212, 175, 55, 0.5),
		0 0 40px rgba(255, 215, 0, 0.4),
		inset 0 1px 0 rgba(255, 255, 255, 0.4);
	border-color: #ffd700;
}

#victory-screen .victory-home-btn:active {
	transform: scale(0.95) translateY(2px);
	filter: brightness(0.85);
	box-shadow: 
		0 2px 8px rgba(0, 0, 0, 0.5),
		0 0 15px rgba(212, 175, 55, 0.3),
		inset 0 2px 4px rgba(0, 0, 0, 0.3);
	transition: transform 0.08s ease, filter 0.08s ease, box-shadow 0.08s ease;
}

/* Victory screen transitions */
#victory-screen.hidden {
	opacity: 0;
	transform: scale(1.3);
	pointer-events: none;
	filter: blur(10px);
	transition: opacity 0.8s ease-out, transform 0.8s ease-out, filter 0.6s ease-out;
}

#victory-screen.exit-to-home {
	opacity: 0;
	transform: scale(0.8) translateY(50px);
	filter: blur(15px);
	pointer-events: none;
	transition: opacity 0.6s ease-in, transform 0.6s ease-in, filter 0.4s ease-in;
}

#victory-screen:not(.hidden):not(.exit-to-home) {
	opacity: 1;
	transform: scale(1);
	filter: blur(0);
	pointer-events: auto;
	animation: victoryEnterDramatic 1.2s ease-out forwards;
}

@keyframes victoryEnterDramatic {
	0% {
		opacity: 0;
		transform: scale(2);
		filter: blur(20px) brightness(3);
	}
	30% {
		opacity: 1;
		transform: scale(0.85);
		filter: blur(0) brightness(1.5);
	}
	50% {
		transform: scale(1.05);
		filter: blur(0) brightness(1.2);
	}
	70% {
		transform: scale(0.98);
		filter: blur(0) brightness(1.1);
	}
	85% {
		transform: scale(1.02);
	}
	100% {
		opacity: 1;
		transform: scale(1);
		filter: blur(0) brightness(1);
	}
}

/* ========================================================================
   VICTORY SCREEN LANDSCAPE RESPONSIVE FIXES
   ======================================================================== */

/* Landscape mode: horizontal layout for victory screen */
@media (orientation: landscape) {
	#victory-screen {
		flex-direction: row;
		padding: clamp(8px, 2vh, 15px) clamp(15px, 3vw, 25px);
	}
	
	#victory-screen .victory-content {
		/* flex-direction: row; */
		flex-wrap: wrap;
		justify-content: center;
		align-items: center;
		gap: clamp(15px, 3vw, 30px);
		max-width: 100%;
		max-height: 100vh;
		/* overflow-y: auto; */
	}
	
	/* Badge + title group */
	#victory-screen .victory-badge {
		order: 1;
		transform: scale(0.7);
	}
	
	#victory-screen .victory-title {
		order: 2;
		font-size: clamp(1.8rem, 6vh, 3rem) !important;
	}
	
	#victory-screen .victory-subtitle {
		order: 3;
		width: 100%;
		font-size: clamp(0.8rem, 2vh, 1rem);
	}
	
	/* Stats horizontal layout */
	#victory-screen .victory-stats {
		order: 4;
		flex-direction: row;
		gap: clamp(10px, 2vw, 20px);
		margin: clamp(5px, 1vh, 10px) 0;
	}
	
	#victory-screen .victory-stat {
		padding: clamp(6px, 1vh, 10px) clamp(15px, 3vw, 25px);
	}
	
	#victory-screen .stat-value {
		font-size: clamp(1rem, 3vh, 1.5rem);
	}
	
	/* Button */
	#victory-screen .victory-btn-container {
		order: 5;
		margin-top: clamp(5px, 1vh, 10px);
	}
	
	#victory-screen .victory-home-btn {
		padding: clamp(8px, 1.5vh, 12px) clamp(15px, 3vw, 30px);
		font-size: clamp(0.85rem, 2vh, 1rem);
	}
	
	/* Reduce decorative elements in landscape */
	#victory-screen .victory-rays {
		width: clamp(100px, 25vh, 200px);
		height: clamp(100px, 25vh, 200px);
	}
	
	#victory-screen .victory-trophy {
		font-size: clamp(2.5rem, 10vh, 5rem);
	}
}

/* Small landscape: even more compact */
@media (orientation: landscape) and (max-height: 450px) {
	#victory-screen .victory-content {
		gap: clamp(8px, 2vw, 15px);
	}
	
	#victory-screen .victory-badge {
		transform: scale(0.5);
	}
	
	#victory-screen .victory-title {
		font-size: clamp(1.5rem, 5vh, 2.5rem) !important;
	}
	
	#victory-screen .victory-subtitle {
		font-size: clamp(0.7rem, 1.8vh, 0.9rem);
	}
	
	#victory-screen .victory-stats {
		gap: clamp(6px, 1.5vw, 12px);
	}
	
	#victory-screen .victory-stat {
		padding: clamp(4px, 0.8vh, 8px) clamp(10px, 2vw, 18px);
	}
	
	#victory-screen .stat-label {
		font-size: clamp(0.6rem, 1.5vh, 0.75rem);
	}
	
	#victory-screen .stat-value {
		font-size: clamp(0.9rem, 2.5vh, 1.2rem);
	}
	
	#victory-screen .victory-home-btn {
		padding: clamp(6px, 1vh, 10px) clamp(12px, 2.5vw, 25px);
		font-size: clamp(0.75rem, 1.8vh, 0.9rem);
	}
	
	#victory-screen .victory-trophy {
		font-size: clamp(2rem, 8vh, 3.5rem);
	}
}

/* Very small landscape (phones) */
@media (orientation: landscape) and (max-height: 350px) {
	#victory-screen {
		padding: 5px 10px;
	}
	
	#victory-screen .victory-content {
		gap: clamp(5px, 1.5vw, 10px);
	}
	
	#victory-screen .victory-badge {
		transform: scale(0.4);
	}
	
	#victory-screen .victory-rays {
		display: none;
	}
	
	#victory-screen .victory-title {
		font-size: clamp(1.2rem, 4vh, 2rem) !important;
	}
	
	#victory-screen .victory-subtitle {
		font-size: clamp(0.6rem, 1.5vh, 0.8rem);
	}
	
	#victory-screen .victory-stat {
		padding: 4px 10px;
	}
	
	#victory-screen .stat-label {
		font-size: 0.55rem;
	}
	
	#victory-screen .stat-value {
		font-size: clamp(0.8rem, 2vh, 1rem);
	}
	
	#victory-screen .victory-home-btn {
		padding: 5px 12px;
		font-size: 0.7rem;
	}
	
	#victory-screen .victory-trophy {
		font-size: clamp(1.5rem, 6vh, 2.5rem);
	}
}

/* Landscape mode: more compact overlay spacing */
@media (orientation: landscape) {
	#overlay {
		padding: clamp(8px, 2vh, 15px) clamp(15px, 4vw, 30px);
		gap: clamp(4px, 1vh, 10px);
	}
	
	/* Title and subtitle keep original size - only adjust spacing */
	#overlay .title-text {
		margin-bottom: clamp(2px, 0.5vh, 6px) !important;
	}
	
	#overlay .opacity-80 {
		margin-bottom: clamp(6px, 1.5vh, 15px) !important;
	}
}

/* Small landscape: even more compact */
@media (orientation: landscape) and (max-height: 500px) {
	#overlay {
		padding: clamp(5px, 1.5vh, 10px) clamp(10px, 3vw, 20px);
		gap: clamp(2px, 0.5vh, 6px);
	}
	
	#overlay .title-text {
		margin-bottom: 2px !important;
	}
	
	#overlay .opacity-80 {
		margin-bottom: clamp(4px, 1vh, 10px) !important;
	}
}

/* Very small landscape (phones) */
@media (orientation: landscape) and (max-height: 400px) {
	#overlay {
		padding: 4px 10px;
		gap: 2px;
	}
	
	#overlay .title-text {
		margin-bottom: 1px !important;
	}
	
	#overlay .opacity-80 {
		margin-bottom: 3px !important;
	}
}

/* Small portrait screens - keep original sizes */
@media (orientation: portrait) and (max-height: 700px) {
	#overlay {
		padding: clamp(10px, 2.5vh, 20px) clamp(15px, 4vw, 30px);
	}
}

/* Very small portrait */
@media (orientation: portrait) and (max-height: 600px) {
	#overlay {
		padding: 8px 12px;
	}
}

/* Victory Screen Portrait Mode - Wider star spacing */
@media (orientation: portrait) {
	/* Wider spacing between sparkle stars in portrait mode */
	#victory-screen .victory-sparkles::before,
	#victory-screen .victory-sparkles::after {
		letter-spacing: 80px;
		font-size: 1.8rem;
	}
}

/* Victory Screen Portrait Mode - Small screens */
@media (orientation: portrait) and (max-height: 700px) {
	#victory-screen .victory-sparkles::before,
	#victory-screen .victory-sparkles::after {
		letter-spacing: 100px;
		font-size: 1.5rem;
	}
}

#gameover-screen {
	background: rgba(32, 26, 22, 0.82);
	backdrop-filter: blur(12px) brightness(1.08) saturate(115%);
	-webkit-backdrop-filter: blur(12px) brightness(1.08) saturate(115%);
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	position: absolute;
	inset: 0;
	z-index: 100;
	padding: clamp(20px, 4vh, 40px) clamp(20px, 5vw, 40px);
	text-align: center;
	gap: clamp(8px, 2vh, 16px);
}

/* Gameover screen title */
#gameover-screen h1 {
	font-family: 'Black Ops One', sans-serif;
	margin-bottom: 0 !important;
}

#gameover-screen .title-text {
	color: transparent !important;
	background: linear-gradient(120deg, #facc15, #f97316, #fb7185);
	-webkit-background-clip: text;
	background-clip: text;
	text-shadow: 0 6px 18px rgba(0, 0, 0, 0.65);
}

/* Gameover screen buttons container */
#gameover-screen .flex.flex-col {
	gap: clamp(12px, 2vh, 20px);
	width: clamp(16rem, 40vw, 20rem);
}

/* Landscape gameover screen */
@media (orientation: landscape) {
	#gameover-screen {
		padding: clamp(15px, 3vh, 30px) clamp(20px, 5vw, 40px);
		gap: clamp(8px, 1.5vh, 12px);
	}
	
	#gameover-screen h1 {
		font-size: clamp(2.5rem, 8vw, 4.5rem) !important;
	}
	
	#gameover-screen .flex.flex-col {
		gap: clamp(10px, 2vh, 18px) !important;
		width: clamp(16rem, 35vw, 20rem) !important;
	}
}

/* Very small landscape gameover */
@media (orientation: landscape) and (max-height: 450px) {
	#gameover-screen {
		padding: 10px 15px;
		gap: 8px;
	}
	
	#gameover-screen h1 {
		font-size: clamp(2rem, 7vw, 3rem) !important;
	}
	
	#gameover-screen .flex.flex-col {
		gap: 10px !important;
		width: clamp(14rem, 32vw, 17rem) !important;
	}
	
	#go-score {
		font-size: clamp(1rem, 3vw, 1.3rem) !important;
		margin-bottom: 0.5rem !important;
	}
}

#go-score {
	color: #fef3c7 !important;
	text-shadow: 0 4px 12px rgba(0, 0, 0, 0.7);
}

#overlay.hidden,
#gameover-screen.hidden {
	opacity: 0;
	transform: scale(0.95);
	pointer-events: none;
	transition: opacity 0.6s ease-out, transform 0.6s ease-out;
	animation: overlayExit 0.6s ease-out forwards;
}

@keyframes overlayExit {
	from {
		opacity: 1;
		transform: scale(1) rotateY(0deg);
		filter: blur(0);
	}

	to {
		opacity: 0;
		transform: scale(0.85) rotateY(-20deg);
		filter: blur(15px);
	}
}

#overlay:not(.hidden),
#gameover-screen:not(.hidden) {
	opacity: 1;
	transform: scale(1);
	animation: overlayEnter 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes overlayEnter {
	from {
		opacity: 0;
		transform: scale(0.8) rotateX(30deg);
		filter: blur(20px);
	}

	to {
		opacity: 1;
		transform: scale(1) rotateX(0deg);
		filter: blur(0);
	}
}

/* PAUSE SCREEN - Blurred and brighter with smooth fade transitions */
#pause-screen {
	position: absolute;
	inset: 0;
	background: rgba(80, 70, 60, 0);
	backdrop-filter: blur(0px) brightness(1);
	-webkit-backdrop-filter: blur(0px) brightness(1);
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	z-index: 100;
	padding: clamp(20px, 4vh, 40px) clamp(20px, 5vw, 40px);
	text-align: center;
	gap: clamp(8px, 2vh, 16px);
	/* Smooth fade in/out transitions */
	opacity: 0;
	visibility: hidden;
	transition: opacity 0.35s ease, visibility 0.35s ease, 
	            background 0.35s ease, 
	            backdrop-filter 0.35s ease,
	            -webkit-backdrop-filter 0.35s ease;
}

/* Pause screen visible state */
#pause-screen:not(.hidden) {
	opacity: 1;
	visibility: visible;
	background: rgba(80, 70, 60, 0.4);
	backdrop-filter: blur(12px) brightness(1.3);
	-webkit-backdrop-filter: blur(12px) brightness(1.3);
}

/* Pause screen hidden state - override default .hidden behavior */
#pause-screen.hidden {
	display: flex !important; /* Keep display flex for transition to work */
	opacity: 0;
	visibility: hidden;
	background: rgba(80, 70, 60, 0);
	backdrop-filter: blur(0px) brightness(1);
	-webkit-backdrop-filter: blur(0px) brightness(1);
	pointer-events: none;
}

/* Pause screen content fade animation */
#pause-screen h1,
#pause-screen .flex.flex-col {
	transition: opacity 0.3s ease, transform 0.3s ease;
}

#pause-screen:not(.hidden) h1,
#pause-screen:not(.hidden) .flex.flex-col {
	opacity: 1;
	transform: translateY(0) scale(1);
}

#pause-screen.hidden h1,
#pause-screen.hidden .flex.flex-col {
	opacity: 0;
	transform: translateY(-10px) scale(0.95);
}

/* DEPLOY CONFIRMATION POPUP */
#deploy-confirm-popup {
	position: fixed;
	inset: 0;
	background: rgba(0, 0, 0, 0);
	backdrop-filter: blur(0px);
	-webkit-backdrop-filter: blur(0px);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 1000;
	padding: 20px;
	opacity: 0;
	visibility: hidden;
	transition: background 0.4s ease, backdrop-filter 0.4s ease, opacity 0.4s ease, visibility 0.4s ease;
}

#deploy-confirm-popup.active {
	opacity: 1;
	visibility: visible;
	background: rgba(0, 0, 0, 0.85);
	backdrop-filter: blur(8px);
	-webkit-backdrop-filter: blur(8px);
}

#deploy-confirm-popup.hidden {
	opacity: 0;
	visibility: hidden;
	background: rgba(0, 0, 0, 0);
	backdrop-filter: blur(0px);
	-webkit-backdrop-filter: blur(0px);
}

.confirm-popup-content {
	background: linear-gradient(145deg, rgba(60, 50, 40, 0.98), rgba(40, 35, 30, 0.98));
	border: 3px solid #8b7355;
	border-radius: 12px;
	padding: clamp(15px, 3vw, 30px);
	max-width: 360px;
	width: 85%;
	text-align: center;
	box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8),
	            inset 0 1px 0 rgba(255, 255, 255, 0.1),
	            0 0 60px rgba(255, 100, 0, 0.3);
	transform: scale(0.7) translateY(-50px);
	opacity: 0;
	transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.4s ease;
}

#deploy-confirm-popup.active .confirm-popup-content {
	transform: scale(1) translateY(0);
	opacity: 1;
	animation: popupShake 0.6s ease-out 0.3s;
}

@keyframes popupShake {
	0%, 100% { transform: scale(1) translateY(0) rotate(0deg); }
	20% { transform: scale(1.02) translateY(-2px) rotate(-0.5deg); }
	40% { transform: scale(1) translateY(0) rotate(0.5deg); }
	60% { transform: scale(1.01) translateY(-1px) rotate(-0.3deg); }
	80% { transform: scale(1) translateY(0) rotate(0.2deg); }
}

.confirm-title {
	animation: warningPulse 1.5s ease-in-out infinite;
}

@keyframes warningPulse {
	0%, 100% { 
		text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
		transform: scale(1);
	}
	50% { 
		text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5), 0 0 20px rgba(255, 150, 0, 0.6);
		transform: scale(1.02);
	}
}

.confirm-popup-content .confirm-title {
	font-family: 'Black Ops One', sans-serif;
	font-size: clamp(1rem, 3vw, 1.5rem);
	color: #fbbf24;
	margin-bottom: 0.75rem;
	text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
	animation: none; /* Override the global confirm-title animation */
}

#deploy-confirm-popup.active .confirm-popup-content .confirm-title {
	animation: warningPulse 1.5s ease-in-out infinite 0.5s;
}

.confirm-text {
	font-size: clamp(0.8rem, 2vw, 0.95rem);
	color: #d4c5b0;
	margin-bottom: 0.5rem;
	line-height: 1.4;
}

.confirm-subtext {
	font-family: 'Courier New', monospace;
	font-size: clamp(0.75rem, 1.8vw, 0.9rem);
	color: #8bc34a;
	margin-bottom: 1rem;
	padding: 6px;
	background: rgba(0, 0, 0, 0.3);
	border-radius: 6px;
}

.confirm-buttons {
	display: flex;
	flex-direction: column;
	gap: 10px;
}

/* Isolate transform on buttons to prevent affecting siblings */
.confirm-buttons .pause-menu-btn {
	position: relative;
	transform-origin: center center;
	will-change: transform;
	isolation: isolate;
	contain: layout style;
}

/* Override active state to not affect parent layout */
.confirm-buttons .pause-menu-btn:active {
	transform: scale(0.97);
	filter: brightness(0.85);
}

/* Landscape mode - even more compact */
@media (orientation: landscape) and (max-height: 500px) {
	.confirm-popup-content {
		max-width: 320px;
		padding: 12px 16px;
	}
	
	.confirm-title {
		font-size: 1rem;
		margin-bottom: 0.5rem;
	}
	
	.confirm-text {
		font-size: 0.75rem;
		margin-bottom: 0.4rem;
	}
	
	.confirm-subtext {
		font-size: 0.7rem;
		margin-bottom: 0.6rem;
		padding: 4px;
	}
	
	.confirm-buttons {
		gap: 8px;
	}
	
	.confirm-buttons .pause-menu-btn {
		padding: 8px 12px;
		font-size: 0.8rem;
	}
}

/* Pause screen title - increased spacing from buttons */
#pause-screen h1 {
	margin-bottom: clamp(1rem, 3vh, 2rem) !important;
	font-family: 'Black Ops One', sans-serif;
	color: #d4c5b0;
	text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
}

/* Pause screen buttons container */
#pause-screen .flex.flex-col {
	gap: clamp(12px, 2vh, 20px);
	width: clamp(16rem, 40vw, 20rem);
}

/* Landscape pause screen */
@media (orientation: landscape) {
	#pause-screen {
		padding: clamp(15px, 3vh, 30px) clamp(20px, 5vw, 40px);
		gap: clamp(8px, 1.5vh, 12px);
	}
	
	#pause-screen h1 {
		font-size: clamp(2.5rem, 8vw, 4.5rem) !important;
		margin-bottom: clamp(0.8rem, 2.5vh, 1.5rem) !important;
	}
	
	#pause-screen .flex.flex-col {
		gap: clamp(10px, 2vh, 18px) !important;
		width: clamp(16rem, 35vw, 20rem) !important;
	}
}

/* Very small landscape */
@media (orientation: landscape) and (max-height: 450px) {
	#pause-screen {
		padding: 10px 15px;
		gap: 8px;
	}
	
	#pause-screen h1 {
		font-size: clamp(2rem, 7vw, 3rem) !important;
		margin-bottom: 0.6rem !important;
	}
	
	#pause-screen .flex.flex-col {
		gap: 10px !important;
		width: clamp(14rem, 32vw, 17rem) !important;
	}
}

/* Unified button styling for pause and gameover screens - matching home screen style */
.pause-menu-btn {
	/* Same styling as .menu-buttons button on home screen */
	padding: 0.75rem 1.5rem;
	font-size: 1rem;
	width: 100%;
	border-radius: 8px;
	border: 3px solid;
	box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
	backdrop-filter: blur(8px);
	-webkit-backdrop-filter: blur(8px);
	letter-spacing: 0.12em;
	text-transform: uppercase;
	font-weight: 700;
	cursor: pointer;
	transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
}

.pause-menu-btn:hover {
	transform: translateY(-1px) scale(1.01);
	box-shadow: 0 12px 22px rgba(0, 0, 0, 0.4);
}

.pause-menu-btn:active {
	transform: translateY(3px) scale(0.97);
	filter: brightness(0.8);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5), inset 0 2px 4px rgba(0, 0, 0, 0.3);
	transition: transform 0.08s ease, filter 0.08s ease, box-shadow 0.08s ease;
}

/* Very small landscape for pause menu buttons - smaller sizing */
@media (orientation: landscape) and (max-height: 450px) {
	.pause-menu-btn {
		padding: 0.6rem 1.2rem;
		font-size: 0.9rem;
	}
}

.title-text {
	font-family: 'Black Ops One', 'Impact', sans-serif;
	color: #d4c5b0;
	/* Light tan */
	text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8), 0 0 20px rgba(139, 115, 85, 0.4);
	line-height: 1.1;
	font-weight: 400;
}

/* Version Number - Elegant & Minimal */
.version-number {
	position: absolute;
	bottom: clamp(12px, 3vh, 25px);
	right: clamp(15px, 4vw, 30px);
	font-family: 'Rajdhani', var(--font-mono), monospace;
	font-size: clamp(10px, 1.5vw, 13px);
	font-weight: 500;
	color: rgba(212, 197, 176, 0.4);
	letter-spacing: 2.5px;
	text-transform: uppercase;
	text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
	padding: 5px 12px;
	background: linear-gradient(90deg, 
		transparent 0%, 
		rgba(70, 60, 50, 0.12) 20%, 
		rgba(70, 60, 50, 0.15) 50%, 
		rgba(70, 60, 50, 0.12) 80%, 
		transparent 100%
	);
	border-radius: 4px;
	user-select: none;
	pointer-events: none;
	transition: opacity 0.3s ease;
}

/* Subtle hover effect when parent is hovered */
#overlay:hover .version-number {
	opacity: 0.7;
}

/* Music Credits & Toggle - Bottom Left (mirrors version-number style) */
.music-credits {
	position: absolute;
	bottom: clamp(12px, 3vh, 25px);
	left: clamp(15px, 4vw, 30px);
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	gap: 6px;
	z-index: 10;
}

.music-controls-row {
	display: flex;
	flex-direction: column;
	align-items: flex-start;
	gap: 6px;
}

.music-toggle {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	background: linear-gradient(135deg, rgba(70, 60, 50, 0.6), rgba(50, 40, 30, 0.8));
	border: 2px solid rgba(139, 115, 85, 0.5);
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.2s ease;
	user-select: none;
}

.music-toggle:hover {
	background: linear-gradient(135deg, rgba(90, 80, 70, 0.7), rgba(70, 60, 50, 0.9));
	border-color: rgba(139, 115, 85, 0.8);
	transform: scale(1.05);
}

.music-toggle:active {
	transform: scale(0.95);
}

.music-toggle.pushed {
	transform: scale(0.85);
	transition: transform 0.1s ease;
}

.music-toggle.disabled {
	opacity: 0.6;
	filter: grayscale(50%);
}

.music-toggle.disabled:hover {
	background: linear-gradient(135deg, rgba(70, 60, 50, 0.5), rgba(50, 40, 30, 0.7));
}

.music-icon {
	font-size: 16px;
	line-height: 1;
	transition: transform 0.2s ease;
}

.music-toggle:hover .music-icon {
	transform: scale(1.1);
}

.music-text {
	font-family: 'Rajdhani', var(--font-mono), monospace;
	font-size: clamp(8px, 1.2vw, 11px);
	font-weight: 500;
	color: rgba(212, 197, 176, 0.4);
	letter-spacing: 1.5px;
	text-transform: uppercase;
	text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
	padding: 3px 8px;
	background: linear-gradient(90deg, 
		rgba(70, 60, 50, 0.15) 0%, 
		rgba(70, 60, 50, 0.12) 50%, 
		transparent 100%
	);
	border-radius: 3px;
	user-select: none;
	white-space: nowrap;
}

/* Hover effect for music credits */
#overlay:hover .music-text {
	color: rgba(212, 197, 176, 0.6);
}

.hidden {
	display: none !important;
}

#gameover-screen.mission-failed-enter {
	animation: missionBackdrop 0.8s ease forwards;
	backdrop-filter: blur(14px) brightness(1.12) saturate(125%);
	-webkit-backdrop-filter: blur(14px) brightness(1.12) saturate(125%);
}

#gameover-screen.mission-failed-enter h1,
#gameover-screen.mission-failed-enter p,
#gameover-screen.mission-failed-enter button {
	opacity: 0;
	animation: missionContent 0.85s ease forwards;
}

#gameover-screen.mission-failed-enter h1 {
	animation-delay: 0.1s;
}

#gameover-screen.mission-failed-enter p {
	animation-delay: 0.25s;
}

#gameover-screen.mission-failed-enter button {
	animation-delay: 0.4s;
}

@keyframes pulseAbilityWarm {
	0% {
		transform: scale(1);
		box-shadow: 0 0 12px rgba(251, 146, 60, 0.8);
	}

	50% {
		transform: scale(1.08);
		box-shadow: 0 0 26px rgba(251, 191, 36, 0.9);
	}

	100% {
		transform: scale(1);
		box-shadow: 0 0 12px rgba(251, 146, 60, 0.8);
	}
}

@keyframes pulseAbilityCool {
	0% {
		transform: scale(1);
		box-shadow: 0 0 14px rgba(56, 189, 248, 0.8);
	}

	50% {
		transform: scale(1.12);
		box-shadow: 0 0 32px rgba(165, 243, 252, 0.95);
	}

	100% {
		transform: scale(1);
		box-shadow: 0 0 14px rgba(56, 189, 248, 0.8);
	}
}

/* ===========================================
   MOTHERSHIP DETECTED - Elegant Warning System
   =========================================== */

/* Elegant subtle pulse animation */
@keyframes bossWarningPulse {
	0%, 100% {
		filter: drop-shadow(0 0 8px rgba(220, 38, 38, 0.6)) 
		        drop-shadow(0 0 16px rgba(220, 38, 38, 0.3))
		        drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.8));
		transform: translate(-50%, -50%) scale(1);
	}
	50% {
		filter: drop-shadow(0 0 12px rgba(220, 38, 38, 0.7)) 
		        drop-shadow(0 0 24px rgba(220, 38, 38, 0.4))
		        drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.8));
		transform: translate(-50%, -50%) scale(1.02);
	}
}

/* Subtle breathing effect - NO OPACITY CHANGE (controlled by JS) */
@keyframes bossWarningFlicker {
	0%, 100% { filter: brightness(1); }
	50% { filter: brightness(1.05); }
}

/* Simple fade-in entrance */
@keyframes bossWarningFadeIn {
	0% {
		opacity: 0;
		transform: translate(-50%, -50%) scale(0.95);
	}
	100% {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1);
	}
}

#boss-warning {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	width: 100%;
	text-align: center;
	
	/* Elegant crimson gradient text */
	color: #dc2626;
	background: linear-gradient(
		180deg, 
		#ef4444 0%, 
		#dc2626 40%, 
		#b91c1c 100%
	);
	background-clip: text;
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	
	/* Typography - Clean and dramatic */
	font-family: 'Black Ops One', 'Impact', sans-serif;
	font-size: clamp(22px, 4.5vw, 42px);
	font-weight: 900;
	letter-spacing: clamp(4px, 1vw, 12px);
	text-transform: uppercase;
	
	/* Subtle elegant glow */
	filter: drop-shadow(0 0 8px rgba(220, 38, 38, 0.6)) 
	        drop-shadow(0 0 16px rgba(220, 38, 38, 0.3))
	        drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.8));
	
	/* Hidden by default */
	opacity: 0;
	pointer-events: none;
	z-index: 100;
	
	/* Animation controlled by JS - no CSS transition to avoid conflicts */
	animation: none;
	transition: none;
	
	/* Padding for visual breathing room */
	padding: 20px;
	box-sizing: border-box;
}

/* When boss warning is visible - elegant pulse animation only (opacity controlled by JS) */
#boss-warning.active {
	animation: bossWarningPulse 2.5s ease-in-out infinite;
}

/* No backdrop overlay needed */
#boss-warning::before {
	display: none;
}

/* Remove the glitchy after pseudo-element */
#boss-warning::after {
	display: none;
}

/* Portrait mode optimizations for mobile */
@media (orientation: portrait) {
	#boss-warning {
		font-size: clamp(18px, 4.5vw, 32px);
		letter-spacing: clamp(3px, 0.8vw, 8px);
		padding: 15px 10px;
		line-height: 1.3;
	}
}

/* Landscape mode optimizations */
@media (orientation: landscape) {
	#boss-warning {
		font-size: clamp(24px, 4vw, 44px);
		letter-spacing: clamp(5px, 1.2vw, 14px);
		top: 45%;
		padding: 20px 30px;
	}
}

/* Small screens - ensure text fits */
@media (max-width: 480px) {
	#boss-warning {
		font-size: clamp(14px, 4vw, 24px);
		letter-spacing: 2px;
		padding: 10px 5px;
	}
}

/* Large screens */
@media (min-width: 1200px) {
	#boss-warning {
		font-size: clamp(48px, 4vw, 72px);
		letter-spacing: 12px;
		filter: drop-shadow(0 0 15px #ff0000) 
		        drop-shadow(0 0 30px rgba(255, 0, 0, 0.9))
		        drop-shadow(0 0 60px rgba(255, 0, 0, 0.6))
		        drop-shadow(0 0 100px rgba(255, 0, 0, 0.3))
		        drop-shadow(4px 4px 8px rgba(0, 0, 0, 0.95));
	}
}

.keyboard-hint {
	position: absolute;
	bottom: 250px;
	width: 100%;
	text-align: center;
	color: rgba(212, 197, 176, 0.5);
	/* Light tan semi-transparent */
	font-size: 12px;
	font-family: 'Orbitron', var(--font-primary);
	pointer-events: none;
	letter-spacing: 1px;
}

:root {
	/* Ensures score boxes and buttons share responsive width */
	--menu-block-width: 16rem; /* Same as w-64 (256px) */
}

.score-list {
	width: 16rem; /* Same as w-64 to match button container */
	max-width: 16rem;
	margin: 0 auto clamp(8px, 1.5vh, 12px);
	background: linear-gradient(145deg, rgba(30, 25, 20, 0.75), rgba(15, 12, 10, 0.65));
	padding: clamp(8px, 1.6vh, 14px);
	border-radius: 12px;
	border: 1px solid rgba(139, 195, 74, 0.3);
	display: flex;
	flex-direction: row;
	gap: clamp(8px, 1.6vw, 14px);
	box-shadow: 
		0 8px 32px rgba(0, 0, 0, 0.5),
		0 0 20px rgba(139, 195, 74, 0.1),
		inset 0 1px 0 rgba(255, 255, 255, 0.05);
	backdrop-filter: blur(16px) saturate(150%);
	-webkit-backdrop-filter: blur(16px) saturate(150%);
}

.menu-buttons {
	display: flex;
	flex-direction: column;
	align-items: stretch;
	gap: clamp(6px, 1.2vh, 10px);
	width: 16rem; /* Same as w-64 (256px) to match pause screen */
	max-width: 16rem;
	margin: 0 auto;
	background: linear-gradient(145deg, rgba(30, 25, 20, 0.6), rgba(15, 12, 10, 0.5));
	padding: clamp(10px, 2vh, 16px);
	border-radius: 12px;
	border: 1px solid rgba(139, 115, 85, 0.25);
	box-shadow: 
		0 8px 32px rgba(0, 0, 0, 0.4),
		inset 0 1px 0 rgba(255, 255, 255, 0.03);
	backdrop-filter: blur(16px) saturate(140%);
	-webkit-backdrop-filter: blur(16px) saturate(140%);
}

.menu-buttons button {
	padding: 0.75rem 1.5rem; /* Same as py-3 px-6 in pause screen */
	font-size: 1rem; /* Same base font size as pause screen */
	width: 100%;
	border-radius: 8px;
	border: 3px solid;
	box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
	backdrop-filter: blur(8px);
	-webkit-backdrop-filter: blur(8px);
	letter-spacing: 0.12em; /* Same as pause screen */
	text-transform: uppercase;
	font-weight: 700;
	transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
}

.menu-buttons button:not(.inactive):hover {
	transform: translateY(-1px) scale(1.01);
	box-shadow: 0 12px 22px rgba(0, 0, 0, 0.4);
}

.menu-buttons button:not(.inactive):active {
	transform: translateY(3px) scale(0.96);
	filter: brightness(0.8);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5), inset 0 2px 4px rgba(0, 0, 0, 0.3);
	transition: transform 0.08s ease, filter 0.08s ease, box-shadow 0.08s ease;
}

#resume-game-btn {
	background: linear-gradient(135deg, #d97706, #fbbf24) !important;
	color: #3e2c1c !important;
	border: 3px solid #b45309 !important;
	animation: pulseGlow 2s ease-in-out infinite;
	opacity: 1;
}

#resume-game-btn.inactive {
	background: linear-gradient(135deg, rgba(107, 114, 128, 0.4), rgba(75, 85, 99, 0.4)) !important;
	color: rgba(212, 197, 176, 0.4) !important;
	border: 3px solid rgba(107, 114, 128, 0.3) !important;
	animation: none;
	opacity: 0.5;
	cursor: not-allowed;
	pointer-events: none;
}

@keyframes pulseGlow {

	0%,
	100% {
		box-shadow: 2px 2px 15px rgba(0, 0, 0, 0.6), 0 0 20px rgba(251, 191, 36, 0.4);
	}

	50% {
		box-shadow: 2px 2px 15px rgba(0, 0, 0, 0.6), 0 0 30px rgba(251, 191, 36, 0.7);
	}
}

/* Portrait mode: stack scores vertically - ENLARGED FOR READABILITY */
@media (orientation: portrait) {
	:root {
		--menu-block-width: 18rem;
	}

	.score-list {
		flex-direction: column;
		gap: clamp(10px, 2vh, 16px);
		width: 18rem;
		max-width: 18rem;
	}

	.menu-buttons {
		width: 18rem;
		max-width: 18rem;
	}

	.menu-buttons button {
		padding: 0.75rem 1.5rem;
		font-size: 1rem;
	}

	.score-divider {
		width: 100% !important;
		height: 2px !important;
		background: linear-gradient(to right, transparent, rgba(139, 195, 74, 0.5), transparent) !important;
		margin: 0 !important;
	}
	
	/* DYNAMIC score number size in portrait - INDEPENDENT for high/last score */
	/* High Score sizing by digit count - HIGHER specificity with card type */
	.score-card.score-card-high .score-number-high.digits-small {
		font-size: clamp(52px, 16vw, 72px) !important;
		letter-spacing: 2px !important;
	}
	.score-card.score-card-high .score-number-high.digits-normal {
		font-size: clamp(44px, 14vw, 62px) !important;
		letter-spacing: 1.5px !important;
	}
	.score-card.score-card-high .score-number-high.digits-medium {
		font-size: clamp(34px, 11vw, 50px) !important;
		letter-spacing: 1px !important;
	}
	.score-card.score-card-high .score-number-high.digits-large {
		font-size: clamp(26px, 8.5vw, 40px) !important;
		letter-spacing: 0.5px !important;
	}
	.score-card.score-card-high .score-number-high.digits-xlarge {
		font-size: clamp(20px, 6.5vw, 32px) !important;
		letter-spacing: 0 !important;
	}
	
	/* Last Score sizing by digit count - HIGHER specificity with card type */
	.score-card.score-card-last .score-number-last.digits-small {
		font-size: clamp(52px, 16vw, 72px) !important;
		letter-spacing: 2px !important;
	}
	.score-card.score-card-last .score-number-last.digits-normal {
		font-size: clamp(44px, 14vw, 62px) !important;
		letter-spacing: 1.5px !important;
	}
	.score-card.score-card-last .score-number-last.digits-medium {
		font-size: clamp(34px, 11vw, 50px) !important;
		letter-spacing: 1px !important;
	}
	.score-card.score-card-last .score-number-last.digits-large {
		font-size: clamp(26px, 8.5vw, 40px) !important;
		letter-spacing: 0.5px !important;
	}
	.score-card.score-card-last .score-number-last.digits-xlarge {
		font-size: clamp(20px, 6.5vw, 32px) !important;
		letter-spacing: 0 !important;
	}
	
	/* ENLARGED score label in portrait */
	.score-card .score-label {
		font-size: clamp(13px, 4vw, 18px) !important;
		letter-spacing: 3px;
		font-weight: 800;
	}
	
	/* Larger card padding for portrait */
	.score-card {
		padding: clamp(14px, 3.5vh, 24px) clamp(12px, 3vw, 20px);
		border-radius: 12px;
	}
}

/* Landscape mode: wider score box to match title width */
@media (orientation: landscape) {
	:root {
		--menu-block-width: clamp(20rem, 45vw, 28rem);
	}

	.score-list {
		flex-direction: row;
		gap: clamp(6px, 1.2vw, 10px);
		width: clamp(20rem, 45vw, 28rem);
		max-width: 28rem;
		padding: clamp(6px, 1vh, 10px);
		margin-bottom: clamp(6px, 1.2vh, 12px);
	}

	.menu-buttons {
		width: clamp(14rem, 32vw, 18rem);
		max-width: 18rem;
		gap: clamp(5px, 0.8vh, 8px);
	}

	.menu-buttons button {
		padding: clamp(0.5rem, 1.2vh, 0.7rem) clamp(1rem, 2vw, 1.5rem);
		font-size: clamp(0.8rem, 1.8vw, 0.95rem);
	}

	.score-divider {
		width: 2px !important;
		height: auto !important;
	}
	
	/* Landscape score text - INDEPENDENT sizing for high/last score */
	/* High Score sizing by digit count */
	.score-card.score-card-high .score-number-high.digits-small {
		font-size: clamp(22px, 4.5vw, 30px) !important;
	}
	.score-card.score-card-high .score-number-high.digits-normal {
		font-size: clamp(19px, 3.8vw, 26px) !important;
	}
	.score-card.score-card-high .score-number-high.digits-medium {
		font-size: clamp(16px, 3.2vw, 22px) !important;
	}
	.score-card.score-card-high .score-number-high.digits-large {
		font-size: clamp(13px, 2.6vw, 18px) !important;
	}
	.score-card.score-card-high .score-number-high.digits-xlarge {
		font-size: clamp(10px, 2vw, 14px) !important;
	}
	
	/* Last Score sizing by digit count */
	.score-card.score-card-last .score-number-last.digits-small {
		font-size: clamp(22px, 4.5vw, 30px) !important;
	}
	.score-card.score-card-last .score-number-last.digits-normal {
		font-size: clamp(19px, 3.8vw, 26px) !important;
	}
	.score-card.score-card-last .score-number-last.digits-medium {
		font-size: clamp(16px, 3.2vw, 22px) !important;
	}
	.score-card.score-card-last .score-number-last.digits-large {
		font-size: clamp(13px, 2.6vw, 18px) !important;
	}
	.score-card.score-card-last .score-number-last.digits-xlarge {
		font-size: clamp(10px, 2vw, 14px) !important;
	}
	
	.score-card .score-label {
		font-size: clamp(9px, 1.6vw, 11px);
		letter-spacing: 1.5px;
	}
}

/* Small mobile landscape */
@media (orientation: landscape) and (max-height: 500px) {
	.score-list {
		width: clamp(18rem, 42vw, 24rem);
		max-width: 24rem;
		padding: clamp(5px, 0.9vh, 8px);
		margin-bottom: clamp(5px, 1vh, 8px);
	}

	.menu-buttons {
		width: clamp(12rem, 28vw, 16rem);
		max-width: 16rem;
		gap: clamp(4px, 0.6vh, 6px);
	}

	.menu-buttons button {
		padding: clamp(0.4rem, 1vh, 0.6rem) clamp(0.9rem, 1.8vw, 1.2rem);
		font-size: clamp(0.7rem, 1.6vw, 0.85rem);
		border-radius: 6px;
	}
	
	/* Small mobile landscape - INDEPENDENT sizing for high/last score */
	.score-card.score-card-high .score-number-high.digits-small { font-size: clamp(18px, 3.8vw, 24px) !important; }
	.score-card.score-card-high .score-number-high.digits-normal { font-size: clamp(16px, 3.2vw, 21px) !important; }
	.score-card.score-card-high .score-number-high.digits-medium { font-size: clamp(14px, 2.6vw, 18px) !important; }
	.score-card.score-card-high .score-number-high.digits-large { font-size: clamp(11px, 2.1vw, 15px) !important; }
	.score-card.score-card-high .score-number-high.digits-xlarge { font-size: clamp(9px, 1.6vw, 12px) !important; }
	
	.score-card.score-card-last .score-number-last.digits-small { font-size: clamp(18px, 3.8vw, 24px) !important; }
	.score-card.score-card-last .score-number-last.digits-normal { font-size: clamp(16px, 3.2vw, 21px) !important; }
	.score-card.score-card-last .score-number-last.digits-medium { font-size: clamp(14px, 2.6vw, 18px) !important; }
	.score-card.score-card-last .score-number-last.digits-large { font-size: clamp(11px, 2.1vw, 15px) !important; }
	.score-card.score-card-last .score-number-last.digits-xlarge { font-size: clamp(9px, 1.6vw, 12px) !important; }
	
	.score-card .score-label {
		font-size: clamp(8px, 1.4vw, 10px);
	}
}

/* Very small mobile landscape (phones) */
@media (orientation: landscape) and (max-height: 400px) {
	.score-list {
		width: clamp(16rem, 40vw, 22rem);
		max-width: 22rem;
		padding: 4px 6px;
		margin-bottom: 4px;
		gap: 4px;
	}

	.menu-buttons {
		width: clamp(10rem, 26vw, 14rem);
		max-width: 14rem;
		gap: 3px;
	}

	.menu-buttons button {
		padding: 0.35rem 0.8rem;
		font-size: 0.65rem;
		border-radius: 5px;
	}
	
	/* Very small mobile landscape - INDEPENDENT sizing for high/last score */
	.score-card.score-card-high .score-number-high.digits-small { font-size: clamp(16px, 3.2vw, 22px) !important; }
	.score-card.score-card-high .score-number-high.digits-normal { font-size: clamp(14px, 2.8vw, 19px) !important; }
	.score-card.score-card-high .score-number-high.digits-medium { font-size: clamp(12px, 2.3vw, 16px) !important; }
	.score-card.score-card-high .score-number-high.digits-large { font-size: clamp(10px, 1.8vw, 13px) !important; }
	.score-card.score-card-high .score-number-high.digits-xlarge { font-size: clamp(8px, 1.4vw, 10px) !important; }
	
	.score-card.score-card-last .score-number-last.digits-small { font-size: clamp(16px, 3.2vw, 22px) !important; }
	.score-card.score-card-last .score-number-last.digits-normal { font-size: clamp(14px, 2.8vw, 19px) !important; }
	.score-card.score-card-last .score-number-last.digits-medium { font-size: clamp(12px, 2.3vw, 16px) !important; }
	.score-card.score-card-last .score-number-last.digits-large { font-size: clamp(10px, 1.8vw, 13px) !important; }
	.score-card.score-card-last .score-number-last.digits-xlarge { font-size: clamp(8px, 1.4vw, 10px) !important; }
	
	.score-card .score-label {
		font-size: 8px;
	}
}

.score-row {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	background: rgba(54, 45, 38, 0.82);
	border: 1px solid rgba(255, 214, 138, 0.2);
	padding: clamp(5px, 1.2vh, 8px);
	border-radius: 8px;
	color: #f3e4c9;
	font-size: clamp(7px, 1.6vw, 9px);
	font-family: 'Rajdhani', sans-serif;
	font-weight: 600;
	letter-spacing: 0.3px;
	transition: transform 0.3s ease, box-shadow 0.3s ease;
	flex: 1;
	min-width: 0;
	box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06);
}

.score-row span:first-child {
	font-size: clamp(8px, 1.8vw, 10px);
	opacity: 0.75;
	margin-bottom: 2px;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 100%;
}

.score-row span:last-child {
	font-size: clamp(13px, 2.8vw, 17px);
	font-weight: 700;
	font-family: 'Black Ops One', cursive;
	line-height: 1;
	text-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
}

.score-row:hover {
	background: rgba(70, 60, 50, 0.95);
	transform: translateY(-2px);
	box-shadow: 0 8px 18px rgba(0, 0, 0, 0.35);
	z-index: 1;
}

.score-highest {
	border-color: rgba(90, 122, 80, 0.7);
	/* Green border */
	background: linear-gradient(135deg, rgba(74, 103, 65, 0.4), rgba(50, 42, 35, 0.9));
	/* Green to brown */
	box-shadow: 2px 2px 12px rgba(90, 122, 80, 0.5);
	/* Green glow */
}

.score-highest span:first-child {
	color: #fbbf24;
	opacity: 0.9;
}

.score-highest span:last-child {
	color: #8bc34a;
	font-weight: bold;
	font-size: clamp(14px, 3.2vw, 18px);
	text-shadow: 0 0 10px rgba(139, 195, 74, 0.6), 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.score-last {
	border-color: rgba(139, 115, 85, 0.6);
	/* Tan border */
	background: rgba(60, 50, 40, 0.95);
	/* Slightly lighter brown */
}

.score-last span:last-child {
	color: #d4c5b0;
	/* Light tan */
	text-shadow: 0 0 8px rgba(212, 197, 176, 0.3), 1px 1px 2px rgba(0, 0, 0, 0.4);
}

/* Score Card Styling (for dynamically generated score cards) */
.score-card {
	flex: 1;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: clamp(4px, 1vh, 8px);
	padding: clamp(10px, 2vh, 16px) clamp(8px, 1.5vw, 14px);
	border-radius: 10px;
	backdrop-filter: blur(12px);
	-webkit-backdrop-filter: blur(12px);
	min-width: 0;
	overflow: hidden;
}

.score-card .score-label {
	color: #c4a878;
	font-size: clamp(10px, 2vw, 12px);
	letter-spacing: 2px;
	font-weight: 800;
	text-transform: uppercase;
	opacity: 0.95;
	white-space: nowrap;
	text-shadow: 0 1px 3px rgba(0, 0, 0, 0.6);
}

.score-card .score-number {
	font-weight: 900;
	font-family: 'Black Ops One', 'Orbitron', monospace;
	font-size: clamp(22px, 5vw, 32px);
	line-height: 1;
	white-space: nowrap;
	max-width: 100%;
	text-align: center;
	transition: font-size 0.3s ease;
}

/* High Score Card - Green Glow Theme */
.score-card-high {
	background: linear-gradient(145deg, rgba(139, 195, 74, 0.25) 0%, rgba(85, 120, 50, 0.2) 100%);
	border: 2px solid rgba(139, 195, 74, 0.5);
	box-shadow: 
		0 0 15px rgba(139, 195, 74, 0.3),
		inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.score-card-high .score-number {
	color: #a5d66a;
	text-shadow: 
		0 0 20px rgba(139, 195, 74, 0.9),
		0 0 40px rgba(139, 195, 74, 0.5),
		2px 2px 4px rgba(0, 0, 0, 0.8);
}

/* Last Score Card - Bronze/Tan Theme */
.score-card-last {
	background: linear-gradient(145deg, rgba(212, 197, 176, 0.2) 0%, rgba(139, 115, 85, 0.15) 100%);
	border: 2px solid rgba(212, 197, 176, 0.4);
	box-shadow: 
		0 0 12px rgba(212, 197, 176, 0.2),
		inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.score-card-last .score-number {
	color: #e8dcc8;
	text-shadow: 
		0 0 15px rgba(212, 197, 176, 0.7),
		0 0 30px rgba(212, 197, 176, 0.3),
		2px 2px 4px rgba(0, 0, 0, 0.8);
}

/* =====================================================
   DIGIT-BASED FONT SCALING FOR SCORE NUMBERS
   Each score number (high/last) is styled independently
   based on its own digit count class
   Default (desktop) styling - lower priority than portrait/landscape media queries
   ===================================================== */

/* Smallest scores (1-2 digits) - largest font */
.score-number.score-number-high.digits-small {
	font-size: clamp(28px, 6vw, 40px);
}
.score-number.score-number-last.digits-small {
	font-size: clamp(28px, 6vw, 40px);
}

/* Small scores (3-4 digits) */
.score-number.score-number-high.digits-normal {
	font-size: clamp(24px, 5.2vw, 34px);
}
.score-number.score-number-last.digits-normal {
	font-size: clamp(24px, 5.2vw, 34px);
}

/* Medium scores (5-7 digits) */
.score-number.score-number-high.digits-medium {
	font-size: clamp(18px, 4vw, 26px);
}
.score-number.score-number-last.digits-medium {
	font-size: clamp(18px, 4vw, 26px);
}

/* Large scores (8-9 digits) */
.score-number.score-number-high.digits-large {
	font-size: clamp(14px, 3.2vw, 21px);
}
.score-number.score-number-last.digits-large {
	font-size: clamp(14px, 3.2vw, 21px);
}

/* Very large scores (10+ digits) */
.score-number.score-number-high.digits-xlarge {
	font-size: clamp(11px, 2.5vw, 17px);
}
.score-number.score-number-last.digits-xlarge {
	font-size: clamp(11px, 2.5vw, 17px);
}

/* ACHIEVEMENTS SCREEN - Battle Honors Hall */
#achievements-screen {
	position: fixed;
	inset: 0;
	background: 
		radial-gradient(ellipse at top, rgba(139, 195, 74, 0.08) 0%, transparent 50%),
		radial-gradient(ellipse at bottom, rgba(251, 146, 60, 0.06) 0%, transparent 50%),
		linear-gradient(180deg, rgba(20, 18, 15, 0.99) 0%, rgba(35, 30, 25, 0.98) 50%, rgba(25, 22, 18, 0.99) 100%);
	z-index: 9999;
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: clamp(20px, 4vh, 50px) clamp(15px, 4vw, 30px);
	overflow-y: auto;
	overflow-x: hidden;
	/* Enable smooth touch scrolling on mobile */
	-webkit-overflow-scrolling: touch;
	overscroll-behavior: contain;
	/* Ensure touch events are captured for scrolling */
	touch-action: pan-y;
}

/* Custom scrollbar for achievements screen */
#achievements-screen::-webkit-scrollbar {
	width: 8px;
}

#achievements-screen::-webkit-scrollbar-track {
	background: rgba(0, 0, 0, 0.3);
}

#achievements-screen::-webkit-scrollbar-thumb {
	background: rgba(139, 115, 85, 0.6);
	border-radius: 4px;
}

#achievements-screen::-webkit-scrollbar-thumb:hover {
	background: rgba(139, 115, 85, 0.8);
}

/* Decorative top border glow */
#achievements-screen::before {
	content: '';
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	height: 3px;
	background: linear-gradient(90deg, 
		transparent 0%, 
		#8bc34a 20%, 
		#facc15 50%, 
		#8bc34a 80%, 
		transparent 100%);
	box-shadow: 0 0 20px rgba(139, 195, 74, 0.5), 0 0 40px rgba(139, 195, 74, 0.3);
	z-index: 10000;
}

/* Closing animation for achievements screen */
@keyframes achFadeOut {
	from {
		opacity: 1;
	}
	to {
		opacity: 0;
	}
}

#achievements-screen.closing {
	animation: achFadeOut 0.3s ease-out forwards;
	pointer-events: none;
}

.ach-header {
	text-align: center;
	margin-bottom: clamp(20px, 4vh, 40px);
	position: relative;
}

.ach-header h1 {
	font-family: 'Black Ops One', 'Impact', sans-serif;
	font-size: clamp(1.8rem, 6vw, 3.5rem) !important;
	background: linear-gradient(180deg, #f5e6d3 0%, #d4c5b0 50%, #a89580 100%);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
	filter: drop-shadow(0 4px 8px rgba(0,0,0,0.8));
	letter-spacing: 0.15em;
	animation: titleGlow 3s ease-in-out infinite alternate;
}

@keyframes titleGlow {
	0% { filter: drop-shadow(0 4px 8px rgba(0,0,0,0.8)) drop-shadow(0 0 10px rgba(139, 195, 74, 0.2)); }
	100% { filter: drop-shadow(0 4px 8px rgba(0,0,0,0.8)) drop-shadow(0 0 25px rgba(139, 195, 74, 0.4)); }
}

.ach-subtitle {
	font-size: clamp(10px, 2.5vw, 14px);
	letter-spacing: 0.4em;
	color: #8bc34a;
	text-transform: uppercase;
	margin-top: 8px;
	font-weight: 600;
	text-shadow: 0 0 15px rgba(139, 195, 74, 0.5);
}

/* Decorative divider under subtitle */
.ach-subtitle::after {
	content: '';
	display: block;
	width: 120px;
	height: 2px;
	background: linear-gradient(90deg, transparent, rgba(139, 195, 74, 0.6), transparent);
	margin: 15px auto 0;
}

.achievements-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
	gap: clamp(12px, 2.5vw, 20px);
	width: 100%;
	max-width: 900px;
	padding: 0 10px 10px;
	overflow: visible;
}

.achievement-item {
	background: linear-gradient(145deg, rgba(55, 47, 40, 0.9), rgba(40, 34, 28, 0.95));
	border: 2px solid rgba(139, 115, 85, 0.25);
	border-radius: 12px;
	padding: clamp(12px, 2.5vw, 18px);
	display: flex;
	align-items: flex-start;
	gap: clamp(12px, 2.5vw, 18px);
	transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
	position: relative;
	overflow: visible;
}

.achievement-item:hover {
	transform: translateY(-3px) scale(1.02);
	border-color: rgba(139, 115, 85, 0.5);
	box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
}

.achievement-item.locked {
	opacity: 0.5;
	filter: grayscale(0.8) brightness(0.7);
}

.achievement-item.locked:hover {
	opacity: 0.7;
	filter: grayscale(0.6) brightness(0.8);
}

.achievement-item.unlocked {
	background: linear-gradient(145deg, rgba(74, 103, 65, 0.4), rgba(50, 70, 45, 0.5));
	border-color: rgba(139, 195, 74, 0.5);
	box-shadow: 
		0 0 20px rgba(139, 195, 74, 0.15),
		inset 0 1px 0 rgba(139, 195, 74, 0.1);
}

.achievement-item.unlocked:hover {
	border-color: rgba(139, 195, 74, 0.8);
	box-shadow: 
		0 8px 30px rgba(139, 195, 74, 0.25),
		0 0 40px rgba(139, 195, 74, 0.15);
}

/* Level-based achievement colors - each level has distinct appearance */
/* Level 0 (locked) - gray tones */
.achievement-item.level-0 {
	background: linear-gradient(145deg, rgba(60, 60, 60, 0.4), rgba(40, 40, 40, 0.5));
	border-color: rgba(100, 100, 100, 0.4);
}

/* Level 1 (bronze) - warm copper tones (darker) */
.achievement-item.level-1 {
	background: linear-gradient(145deg, rgba(90, 58, 28, 0.5), rgba(65, 45, 22, 0.6));
	border-color: rgba(165, 102, 40, 0.5);
	box-shadow: 
		0 0 12px rgba(165, 102, 40, 0.15),
		inset 0 1px 0 rgba(165, 102, 40, 0.1);
}

.achievement-item.level-1:hover {
	border-color: rgba(165, 102, 40, 0.7);
	box-shadow: 0 8px 20px rgba(165, 102, 40, 0.25);
}

.achievement-item.level-1 .ach-item-icon {
	background: linear-gradient(145deg, rgba(90, 58, 28, 0.6), rgba(65, 45, 22, 0.7));
	border-color: rgba(165, 102, 40, 0.35);
}

/* Level 2 (silver) - cool silver tones (darker) */
.achievement-item.level-2 {
	background: linear-gradient(145deg, rgba(80, 85, 95, 0.5), rgba(55, 60, 70, 0.6));
	border-color: rgba(140, 145, 155, 0.5);
	box-shadow: 
		0 0 14px rgba(140, 145, 155, 0.15),
		inset 0 1px 0 rgba(180, 185, 195, 0.08);
}

.achievement-item.level-2:hover {
	border-color: rgba(160, 165, 175, 0.7);
	box-shadow: 0 8px 22px rgba(140, 145, 155, 0.25);
}

.achievement-item.level-2 .ach-item-icon {
	background: linear-gradient(145deg, rgba(80, 85, 95, 0.6), rgba(55, 60, 70, 0.7));
	border-color: rgba(140, 145, 155, 0.35);
}

/* Level 3+ (gold) - radiant gold tones (darker) */
.achievement-item.level-3 {
	background: linear-gradient(145deg, rgba(120, 95, 30, 0.5), rgba(90, 70, 25, 0.6));
	border-color: rgba(200, 170, 0, 0.55);
	box-shadow: 
		0 0 16px rgba(200, 170, 0, 0.18),
		inset 0 1px 0 rgba(200, 185, 100, 0.12);
}

.achievement-item.level-3:hover {
	border-color: rgba(210, 180, 30, 0.8);
	box-shadow: 
		0 8px 26px rgba(200, 170, 0, 0.3),
		0 0 30px rgba(200, 170, 0, 0.15);
}

.achievement-item.level-3 .ach-item-icon {
	background: linear-gradient(145deg, rgba(120, 95, 30, 0.65), rgba(90, 70, 25, 0.75));
	border-color: rgba(200, 170, 0, 0.4);
	box-shadow: 
		inset 0 2px 4px rgba(0, 0, 0, 0.25),
		0 0 14px rgba(200, 170, 0, 0.2);
}

/* MAX LEVEL achievements - always gold with holographic glow effect */
.achievement-item.max-level {
	background: linear-gradient(145deg, rgba(120, 95, 30, 0.5), rgba(90, 70, 25, 0.6));
	border: 3px solid #c8aa00;
	border-radius: 12px;
	box-shadow: 
		0 0 20px rgba(200, 170, 0, 0.4),
		0 0 40px rgba(255, 107, 157, 0.15),
		0 0 60px rgba(0, 255, 255, 0.08),
		inset 0 1px 0 rgba(255, 255, 255, 0.15);
	animation: holographicPulse 3s ease-in-out infinite;
	position: relative;
	overflow: visible;
}

.achievement-item.max-level::after {
	content: '';
	position: absolute;
	top: -4px;
	left: -4px;
	right: -4px;
	bottom: -4px;
	background: linear-gradient(135deg, 
		rgba(255, 215, 0, 0.25) 0%, 
		rgba(255, 107, 157, 0.25) 25%, 
		rgba(0, 255, 255, 0.25) 50%, 
		rgba(255, 107, 157, 0.25) 75%, 
		rgba(255, 215, 0, 0.25) 100%);
	border-radius: 14px;
	z-index: -1;
	animation: holographicRotate 4s linear infinite;
	filter: blur(2px);
	opacity: 0.8;
}

.achievement-item.max-level:hover {
	box-shadow: 
		0 0 30px rgba(200, 170, 0, 0.5),
		0 0 60px rgba(255, 107, 157, 0.25),
		0 0 90px rgba(0, 255, 255, 0.12),
		inset 0 1px 0 rgba(255, 255, 255, 0.25);
}

.achievement-item.max-level .ach-item-icon {
	background: linear-gradient(145deg, rgba(120, 95, 30, 0.65), rgba(90, 70, 25, 0.75));
	border-color: rgba(200, 170, 0, 0.5);
	box-shadow: 
		inset 0 2px 4px rgba(0, 0, 0, 0.25),
		0 0 18px rgba(200, 170, 0, 0.35);
}

.achievement-item.max-level .ach-item-title {
	color: #d4b800;
	text-shadow: 0 0 12px rgba(200, 170, 0, 0.5);
}

.achievement-item.max-level .ach-progress-label {
	color: #d4b800;
	text-shadow: 0 0 8px rgba(200, 170, 0, 0.4);
}

@keyframes holographicPulse {
	0%, 100% { 
		box-shadow: 
			0 0 20px rgba(200, 170, 0, 0.4),
			0 0 40px rgba(255, 107, 157, 0.15),
			0 0 60px rgba(0, 255, 255, 0.08);
	}
	50% { 
		box-shadow: 
			0 0 25px rgba(200, 170, 0, 0.5),
			0 0 50px rgba(255, 107, 157, 0.2),
			0 0 75px rgba(0, 255, 255, 0.1);
	}
}

@keyframes holographicRotate {
	0% { filter: blur(4px) hue-rotate(0deg); }
	100% { filter: blur(4px) hue-rotate(360deg); }
}

/* ====== SHIMMER STROKE EFFECT FOR ACHIEVEMENT BORDERS ====== */
/* Light sweep effect on border, moving straight from right to left (horizontal) */
/* Uses ::before pseudo-element with horizontal gradient for border shimmer */

/* Level 1 (Bronze) - Warm shimmer on border */
.achievement-item.level-1 {
	position: relative;
	border: 2px solid transparent;
	background: 
		linear-gradient(145deg, rgba(55, 47, 40, 0.95), rgba(40, 34, 28, 0.98)) padding-box,
		linear-gradient(120deg, 
			rgba(165, 102, 40, 0.5) 0%, 
			rgba(165, 102, 40, 0.5) 100%
		) border-box;
}

.achievement-item.level-1::before {
	content: '';
	position: absolute;
	top: -2px;
	left: -2px;
	right: -2px;
	bottom: -2px;
	border-radius: 14px;
	background: linear-gradient(
		90deg,
		transparent 0%,
		transparent 30%,
		rgba(255, 200, 120, 0.9) 45%,
		rgba(255, 230, 180, 1) 50%,
		rgba(255, 200, 120, 0.9) 55%,
		transparent 70%,
		transparent 100%
	);
	background-size: 300% 100%;
	animation: shimmerSlideHorizontal 5s linear infinite;
	z-index: -1;
	pointer-events: none;
	mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
	mask-composite: xor;
	-webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
	-webkit-mask-composite: xor;
	padding: 2px;
}

/* Level 2 (Silver) - Cool shimmer on border */
.achievement-item.level-2 {
	position: relative;
	border: 2px solid transparent;
	background: 
		linear-gradient(145deg, rgba(55, 50, 55, 0.95), rgba(40, 38, 42, 0.98)) padding-box,
		linear-gradient(120deg, 
			rgba(160, 170, 190, 0.5) 0%, 
			rgba(160, 170, 190, 0.5) 100%
		) border-box;
}

.achievement-item.level-2::before {
	content: '';
	position: absolute;
	top: -2px;
	left: -2px;
	right: -2px;
	bottom: -2px;
	border-radius: 14px;
	background: linear-gradient(
		90deg,
		transparent 0%,
		transparent 25%,
		rgba(200, 210, 230, 0.9) 40%,
		rgba(240, 245, 255, 1) 50%,
		rgba(200, 210, 230, 0.9) 60%,
		transparent 75%,
		transparent 100%
	);
	background-size: 300% 100%;
	animation: shimmerSlideHorizontal 5s linear infinite;
	z-index: -1;
	pointer-events: none;
	mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
	mask-composite: xor;
	-webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
	-webkit-mask-composite: xor;
	padding: 2px;
}

/* Level 3 (Gold) - Radiant shimmer on border */
.achievement-item.level-3 {
	position: relative;
	border: 3px solid transparent;
	background: 
		linear-gradient(145deg, rgba(60, 50, 30, 0.95), rgba(45, 38, 25, 0.98)) padding-box,
		linear-gradient(120deg, 
			rgba(200, 170, 0, 0.6) 0%, 
			rgba(200, 170, 0, 0.6) 100%
		) border-box;
}

.achievement-item.level-3::before {
	content: '';
	position: absolute;
	top: -3px;
	left: -3px;
	right: -3px;
	bottom: -3px;
	border-radius: 15px;
	background: linear-gradient(
		90deg,
		transparent 0%,
		transparent 20%,
		rgba(255, 220, 80, 0.9) 35%,
		rgba(255, 255, 200, 1) 50%,
		rgba(255, 220, 80, 0.9) 65%,
		transparent 80%,
		transparent 100%
	);
	background-size: 300% 100%;
	animation: shimmerSlideHorizontal 5s linear infinite;
	z-index: -1;
	pointer-events: none;
	mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
	mask-composite: xor;
	-webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
	-webkit-mask-composite: xor;
	padding: 3px;
}

/* Max Level - Rainbow shimmer on border */
.achievement-item.max-level {
	position: relative;
	border: 3px solid transparent;
	background: 
		linear-gradient(145deg, rgba(60, 50, 30, 0.95), rgba(45, 38, 25, 0.98)) padding-box,
		linear-gradient(120deg, 
			rgba(255, 215, 0, 0.7) 0%, 
			rgba(255, 215, 0, 0.7) 100%
		) border-box;
}

.achievement-item.max-level::before {
	content: '';
	position: absolute;
	top: -3px;
	left: -3px;
	right: -3px;
	bottom: -3px;
	border-radius: 15px;
	background: linear-gradient(
		90deg,
		transparent 0%,
		transparent 15%,
		rgba(255, 100, 100, 1) 25%,
		rgba(255, 200, 50, 1) 35%,
		rgba(150, 255, 150, 1) 50%,
		rgba(100, 200, 255, 1) 65%,
		rgba(200, 150, 255, 1) 75%,
		transparent 85%,
		transparent 100%
	);
	background-size: 300% 100%;
	animation: shimmerSlideHorizontal 5s linear infinite;
	z-index: -1;
	pointer-events: none;
	mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
	mask-composite: xor;
	-webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
	-webkit-mask-composite: xor;
	padding: 3px;
}

/* Shimmer slide animation - moves straight from right to left (horizontal) */
/* Uses wider range so shimmer fully exits before looping */
@keyframes shimmerSlideHorizontal {
	0% {
		background-position: 200% 50%;
	}
	100% {
		background-position: -100% 50%;
	}
}

/* Hover states - faster shimmer (horizontal) */
.achievement-item.level-1:hover::before,
.achievement-item.level-2:hover::before,
.achievement-item.level-3:hover::before,
.achievement-item.max-level:hover::before {
	animation: shimmerSlideHorizontal 3s linear infinite;
}

/* ====== END SHIMMER STROKE EFFECT ====== */

/* Temperature Critical - Blinking animation when temp >= 100% */
#temp-indicator.temp-critical span {
	animation: tempBlink 0.5s ease-in-out infinite;
}

@keyframes tempBlink {
	0%, 100% {
		opacity: 1;
		text-shadow: 0 0 8px #ff0000, 0 0 16px #ff3300;
	}
	50% {
		opacity: 0.4;
		text-shadow: 0 0 4px #ff0000;
	}
}

/* Star removed - cleaner look */

.ach-item-icon {
	font-size: clamp(24px, 5vw, 32px);
	width: 56px;
	height: 56px;
	min-width: 56px;
	min-height: 56px;
	max-width: 56px;
	max-height: 56px;
	display: grid;
	place-items: center;
	place-content: center;
	text-align: center;
	line-height: 1;
	padding: 0;
	margin: 0;
	background: linear-gradient(145deg, rgba(0, 0, 0, 0.4), rgba(20, 18, 15, 0.6));
	border-radius: 12px;
	border: 2px solid rgba(139, 115, 85, 0.2);
	box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
	flex-shrink: 0;
	aspect-ratio: 1 / 1;
}

.achievement-item.unlocked .ach-item-icon {
	background: linear-gradient(145deg, rgba(74, 103, 65, 0.5), rgba(50, 70, 45, 0.6));
	border-color: rgba(139, 195, 74, 0.3);
	box-shadow: 
		inset 0 2px 4px rgba(0, 0, 0, 0.2),
		0 0 15px rgba(139, 195, 74, 0.2);
}

.ach-item-content {
	flex: 1;
	min-width: 0;
}

.ach-item-title {
	font-family: 'Rajdhani', 'Black Ops One', sans-serif;
	font-weight: 700;
	font-size: clamp(15px, 3.5vw, 20px);
	color: #e8ddd0;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	line-height: 1.2;
	margin-bottom: 6px;
}

.achievement-item.unlocked .ach-item-title {
	color: #c5e1a5;
	text-shadow: 0 0 10px rgba(139, 195, 74, 0.3);
}

.ach-item-desc {
	font-size: clamp(11px, 2.5vw, 14px);
	color: rgba(212, 197, 176, 0.7);
	line-height: 1.5;
	margin-bottom: 10px;
}

.ach-progress {
	margin-top: 10px;
}

.ach-progress-label {
	font-size: clamp(11px, 2.5vw, 13px);
	letter-spacing: 0.12em;
	text-transform: uppercase;
	color: rgba(248, 237, 222, 0.75);
	margin-bottom: 5px;
	font-weight: 600;
}

.ach-progress-track {
	width: 100%;
	height: 6px;
	border-radius: 3px;
	background: rgba(0, 0, 0, 0.5);
	overflow: hidden;
	border: 1px solid rgba(139, 115, 85, 0.15);
}

.ach-progress-bar {
	height: 100%;
	background: linear-gradient(90deg, #8bc34a 0%, #cddc39 100%);
	border-radius: 2px;
	transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.ach-item-status {
	display: inline-block;
	font-size: clamp(9px, 1.8vw, 11px);
	font-weight: 700;
	letter-spacing: 0.1em;
	padding: 3px 10px;
	border-radius: 20px;
	text-transform: uppercase;
	margin-top: 6px;
}

.achievement-item.unlocked .ach-item-status {
	color: #1a1a1a;
	background: linear-gradient(90deg, #8bc34a, #aed581);
	box-shadow: 0 0 10px rgba(139, 195, 74, 0.4);
}

.achievement-item.locked .ach-item-status {
	color: rgba(180, 170, 160, 0.8);
	background: rgba(80, 70, 60, 0.6);
	border: 1px solid rgba(139, 115, 85, 0.3);
}

/* Back button styling */
#ach-back-btn {
	margin-top: 15px;
	margin-bottom: 20px;
	padding: clamp(10px, 2vh, 14px) clamp(25px, 5vw, 40px);
	font-size: clamp(12px, 2.5vw, 14px);
	background: linear-gradient(145deg, rgba(70, 60, 50, 0.95), rgba(50, 42, 35, 0.95)) !important;
	border: 2px solid rgba(139, 115, 85, 0.5) !important;
	border-radius: 8px;
	color: #d4c5b0;
	font-weight: 700;
	letter-spacing: 0.15em;
	text-transform: uppercase;
	transition: all 0.3s ease;
	box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
	flex-shrink: 0;
}

#ach-back-btn:hover {
	background: linear-gradient(145deg, rgba(80, 70, 60, 0.95), rgba(60, 52, 45, 0.95)) !important;
	border-color: rgba(139, 115, 85, 0.8) !important;
	transform: translateY(-2px);
	box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
}

#ach-back-btn:active {
	transform: translateY(3px) scale(0.96);
	filter: brightness(0.8);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.5), inset 0 2px 4px rgba(0, 0, 0, 0.3);
	transition: transform 0.08s ease, filter 0.08s ease, box-shadow 0.08s ease;
}

/* ========== ACHIEVEMENTS LANDSCAPE OPTIMIZATION ========== */
@media (orientation: landscape) {
	#achievements-screen {
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: center;
		align-items: flex-start;
		align-content: flex-start;
		padding: clamp(10px, 2vh, 20px) clamp(20px, 4vw, 40px);
		gap: clamp(10px, 2vw, 20px);
	}
	
	/* Header takes full width at top */
	.ach-header {
		width: 100%;
		flex-shrink: 0;
		margin-bottom: clamp(8px, 1.5vh, 15px);
		order: -1;
	}
	
	.ach-header h1 {
		font-size: clamp(1.4rem, 4vw, 2.2rem) !important;
	}
	
	.ach-subtitle {
		font-size: clamp(8px, 1.5vw, 11px);
		letter-spacing: 0.3em;
		margin-top: 4px;
	}
	
	.ach-subtitle::after {
		width: 80px;
		margin: 8px auto 0;
	}
	
	/* Grid optimized for landscape - exactly 2 columns */
	.achievements-grid {
		max-width: 100%;
		width: 100%;
		grid-template-columns: repeat(2, 1fr);
		gap: clamp(8px, 1.5vw, 14px);
		padding: 0 10px 8px;
		overflow: visible;
	}
	
	/* Achievement cards in landscape - larger */
	.achievement-item {
		padding: clamp(12px, 2vw, 16px);
		gap: clamp(12px, 2vw, 16px);
		border-radius: 12px;
	}
	
	/* Icon in landscape - fixed square box with centered emoji */
	.ach-item-icon {
		font-size: 20px !important;
		width: 52px !important;
		height: 52px !important;
		min-width: 52px !important;
		min-height: 52px !important;
		max-width: 52px !important;
		max-height: 52px !important;
		border-radius: 10px;
		display: grid !important;
		place-items: center !important;
		place-content: center !important;
		text-align: center;
		line-height: 1;
		padding: 0;
		margin: 0;
		aspect-ratio: 1 / 1 !important;
	}
	
	/* Text in landscape */
	.ach-item-title {
		font-size: clamp(13px, 2.5vw, 16px);
		margin-bottom: 4px;
	}
	
	.ach-item-desc {
		font-size: clamp(10px, 1.8vw, 12px);
		margin-bottom: 6px;
		line-height: 1.4;
	}
	
	/* Progress section */
	.ach-progress {
		margin-top: 8px;
	}
	
	.ach-progress-label {
		font-size: clamp(9px, 1.6vw, 11px);
		margin-bottom: 4px;
	}
	
	.ach-progress-track {
		height: 6px;
	}
	
	/* Status badge */
	.ach-item-status {
		font-size: clamp(9px, 1.5vw, 11px);
		padding: 3px 10px;
		margin-top: 6px;
	}
	
	/* Back button at bottom center */
	#ach-back-btn {
		order: 999;
		width: auto;
		flex-shrink: 0;
		margin-top: 10px;
		margin-bottom: 15px;
		padding: 10px 30px;
		font-size: clamp(10px, 1.8vw, 13px);
	}
}

/* Extra small landscape (phones) */
@media (orientation: landscape) and (max-height: 450px) {
	#achievements-screen {
		padding: 8px 15px;
		gap: 8px;
	}
	
	.ach-header {
		margin-bottom: 5px;
	}
	
	.ach-header h1 {
		font-size: 1.2rem !important;
	}
	
	.ach-subtitle {
		font-size: 7px;
		margin-top: 2px;
	}
	
	.ach-subtitle::after {
		width: 60px;
		margin: 5px auto 0;
	}
	
	/* Keep 2 columns in small landscape */
	.achievements-grid {
		grid-template-columns: repeat(2, 1fr);
		gap: 6px;
		padding: 0 8px 5px;
		overflow: visible;
	}
	
	.achievement-item {
		padding: 6px 8px;
		gap: 8px;
	}
	
	.ach-item-icon {
		font-size: 16px !important;
		width: 36px !important;
		height: 36px !important;
		min-width: 36px !important;
		min-height: 36px !important;
		max-width: 36px !important;
		max-height: 36px !important;
		display: grid !important;
		place-items: center !important;
		place-content: center !important;
		text-align: center;
		line-height: 1;
		padding: 0;
		margin: 0;
		flex-shrink: 0;
		aspect-ratio: 1 / 1 !important;
	}
	
	.ach-item-title {
		font-size: 11px;
	}
	
	.ach-item-desc {
		font-size: 9px;
		margin-bottom: 2px;
	}
	
	.ach-progress-track {
		height: 5px;
	}
	
	.ach-item-status {
		font-size: 7px;
		padding: 2px 6px;
	}
	
	#ach-back-btn {
		margin-top: 8px;
		margin-bottom: 10px;
		padding: 8px 20px;
		font-size: 9px;
	}
}

/* ACHIEVEMENT POPUP */
#achievement-popup-container {
	position: absolute;
	top: clamp(45px, 8vh, 110px);
	left: 50%;
	transform: translateX(-50%);
	display: flex;
	flex-direction: column;
	gap: 10px;
	pointer-events: none;
	z-index: 1000;
	width: 100%;
	align-items: center;
}

.achievement-popup {
	background: rgba(12, 14, 20, 0.35);
	backdrop-filter: blur(18px);
	border: 1px solid rgba(255, 255, 255, 0.18);
	border-radius: 22px;
	padding: 10px 18px;
	display: flex;
	align-items: center;
	gap: 12px;
	box-shadow: 0 10px 40px rgba(0, 0, 0, 0.55);
	transform: translateY(-40px);
	opacity: 0;
	transition: all 0.45s cubic-bezier(0.19, 1, 0.22, 1);
	min-width: 220px;
}

.achievement-popup.show {
	transform: translateY(0);
	opacity: 1;
}

.achievement-popup .ach-icon {
	font-size: 22px;
}

.achievement-popup .ach-text {
	display: flex;
	flex-direction: column;
}

.achievement-popup .ach-title {
	font-size: 9px;
	color: #facc15;
	letter-spacing: 3px;
	font-weight: 800;
	text-transform: uppercase;
}

.achievement-popup .ach-name {
	font-size: 14px;
	color: #f8edde;
	font-weight: 700;
	font-family: 'Rajdhani', sans-serif;
}

/* Landscape Optimizations */
@media (orientation: landscape) {
	.minimap-box {
		width: 110px;
		height: 110px;
	}

	.controls-area {
		/* Fixed positioning, no padding changes needed */
		display: flex;
	}

	.joystick-container {
		bottom: 22px;
		flex-direction: row;
		align-items: center;
		gap: clamp(16px, 3vw, 32px);
	}

	/* Left control: joystick at left edge, turbo button to the right */
	.joystick-container.left-control {
		left: 28px;
		flex-direction: row-reverse;
	}

	/* Right control: joystick at right edge, ultimate button to the left */
	.joystick-container.right-control {
		right: 28px;
		flex-direction: row;
	}

	.joystick-base {
		width: clamp(75px, 14vw, 120px);
		height: clamp(75px, 14vw, 120px);
		max-width: 130px;
	}

	/* Smaller ability buttons in landscape */
	.ability-btn {
		min-width: clamp(60px, 14vw, 100px);
		min-height: clamp(45px, 10vw, 70px);
	}

	.ability-btn .ability-main {
		font-size: clamp(10px, 1.8vw, 14px);
	}

	.ability-btn .ability-sub {
		font-size: clamp(8px, 1.5vw, 11px);
	}

	/* Larger HUD for landscape mode */
	.stats-panel {
		width: clamp(180px, 18vw, 250px);
		padding: clamp(8px, 1.5vh, 12px);
	}

	.bar-label {
		font-size: clamp(11px, 1.8vw, 13px);
	}

	.bar-frame {
		height: clamp(12px, 2.5vh, 18px);
	}

	.bar-value {
		font-size: clamp(10px, 1.6vw, 13px);
	}

	.weapon-info {
		font-size: clamp(16px, 2.2vw, 22px);
		/* Slightly larger on tablet landscape */
		padding: 6px 10px;
	}
}

/* Portrait Mode - Stack buttons above joysticks */
@media (orientation: portrait) {
	.joystick-container {
		bottom: 24px;
		flex-direction: column;
		align-items: center;
		gap: 24px;
	}

	.joystick-container.left-control {
		left: 15px;
	}

	.joystick-container.right-control {
		right: 15px;
		flex-direction: column;
	}

	.joystick-base {
		order: 2; /* Joystick base at bottom */
	}

	.ability-slot {
		order: 1; /* Button above */
	}
}

/* Mobile Adjustments */
@media (max-width: 600px) {
	.controls-area {
		padding: 0 15px 24px 15px;
		min-height: clamp(210px, 38vh, 280px);
	}

	.minimap-box {
		width: clamp(80px, 18vw, 110px);
		height: clamp(80px, 18vw, 110px);
	}

	.stats-panel {
		width: clamp(160px, 45vw, 220px);
		font-size: clamp(0.85em, 2vw, 1em);
	}

	.weapon-info {
		font-size: clamp(12px, 3vw, 18px);
		/* Smaller on mobile to prevent wrapping */
	}
}

#wave-timer {
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	text-align: center;
	padding: clamp(12px, 1.8vw, 18px) clamp(16px, 3.5vw, 26px);
	border-radius: 12px;
	background: rgba(44, 62, 80, 0.95);
	/* Dark blue-gray matching game theme */
	backdrop-filter: blur(18px);
	border: 2px solid #5a9;
	/* Emerald accent */
	box-shadow: 0 12px 32px rgba(5, 7, 12, 0.75), 0 0 25px rgba(90, 170, 153, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
	z-index: 160;
	min-width: clamp(220px, 45vw, 320px);
	max-width: 80vw;
	color: #f8edde;
	pointer-events: auto;
	display: flex;
	flex-direction: column;
	gap: clamp(8px, 1.5vw, 12px);
	align-items: center;
	overflow: visible;
	/* Dramatic entrance/exit animation */
	animation: waveRewardPopupIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Wave reward popup entrance animation - dramatic scale and glow */
@keyframes waveRewardPopupIn {
	0% {
		opacity: 0;
		transform: translate(-50%, -50%) scale(0.3) rotateX(30deg);
		filter: blur(10px);
		box-shadow: 0 0 0 rgba(90, 170, 153, 0);
	}
	50% {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1.08) rotateX(0deg);
		filter: blur(0);
		box-shadow: 0 0 60px rgba(90, 170, 153, 0.8), 0 0 100px rgba(90, 170, 153, 0.4);
	}
	100% {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1) rotateX(0deg);
		filter: blur(0);
		box-shadow: 0 12px 32px rgba(5, 7, 12, 0.75), 0 0 25px rgba(90, 170, 153, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1);
	}
}

/* Wave reward popup exit animation */
@keyframes waveRewardPopupOut {
	0% {
		opacity: 1;
		transform: translate(-50%, -50%) scale(1);
		filter: blur(0);
	}
	100% {
		opacity: 0;
		transform: translate(-50%, -50%) scale(0.5) translateY(-30px);
		filter: blur(8px);
	}
}

#wave-timer.closing {
	animation: waveRewardPopupOut 0.4s cubic-bezier(0.55, 0.06, 0.68, 0.19) forwards;
}

/* Compact popup in landscape mode */
@media (orientation: landscape) {
	#wave-timer {
		padding: clamp(10px, 1.5vw, 14px) clamp(14px, 3vw, 20px);
		min-width: clamp(200px, 40vw, 280px);
		max-width: 55vw;
		gap: clamp(6px, 1.2vw, 10px);
	}
}

#wave-timer::before {
	content: '';
	position: absolute;
	inset: 1px;
	border-radius: inherit;
	border: 1px solid rgba(255, 255, 255, 0.05);
	pointer-events: none;
}

#wave-timer::after {
	content: '';
	position: absolute;
	inset: 0;
	border-radius: inherit;
	background: radial-gradient(circle at top, rgba(141, 247, 255, 0.15), transparent 60%);
	filter: blur(12px);
	opacity: 0.6;
	pointer-events: none;
}

#wave-timer>* {
	position: relative;
	z-index: 1;
}

#wave-timer .wave-intermission-title {
	font-size: clamp(11px, 2vw, 14px);
	letter-spacing: 0.25em;
	text-transform: uppercase;
	color: #5a9;
	/* Emerald accent */
	font-weight: 700;
	text-shadow: 0 0 10px rgba(90, 170, 153, 0.5);
}

#wave-timer .wave-intermission-count {
	font-size: clamp(28px, 6vw, 38px);
	font-weight: 900;
	font-family: 'Black Ops One', 'Rajdhani', sans-serif;
	letter-spacing: 0.06em;
	color: #f8edde;
	text-shadow: 0 0 20px rgba(248, 237, 222, 0.6), 0 2px 4px rgba(0, 0, 0, 0.8);
}

#wave-timer .wave-intermission-subtitle {
	font-size: clamp(10px, 2.2vw, 13px);
	color: #a4917a;
	letter-spacing: 0.12em;
	text-transform: uppercase;
	max-width: 300px;
	text-align: center;
	width: 100%;
}

#wave-timer .wave-progress {
	width: 100%;
	display: flex;
	flex-direction: column;
	gap: 6px;
}

#wave-timer .wave-progress-track {
	width: 100%;
	height: 6px;
	border-radius: 999px;
	background: rgba(0, 0, 0, 0.5);
	border: 1px solid rgba(141, 247, 255, 0.2);
	box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.7);
	overflow: hidden;
}

#wave-timer .wave-progress-fill {
	height: 100%;
	background: linear-gradient(90deg, #5a9 0%, #7c3);
	/* Emerald gradient */
	box-shadow: 0 0 8px rgba(90, 170, 153, 0.8);
	transition: width 0.2s ease;
}

#wave-timer .wave-resupply-compact {
	width: 100%;
	margin-top: 4px;
	padding: 10px 12px;
	border: 1px solid rgba(141, 247, 255, 0.3);
	border-radius: 8px;
	background: rgba(0, 0, 0, 0.4);
	backdrop-filter: blur(8px);
	box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.5);
}

/* New reward container styling */
#wave-timer .wave-reward-container {
	width: 100%;
	margin-top: 8px;
	padding: 12px;
	border: 2px solid rgba(90, 170, 153, 0.4);
	/* Emerald border */
	border-radius: 10px;
	background: rgba(30, 41, 59, 0.8);
	/* Dark blue-gray */
	backdrop-filter: blur(10px);
	box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.4), 0 3px 12px rgba(0, 0, 0, 0.6);
}

#wave-timer .reward-title {
	font-size: clamp(10px, 2vw, 12px);
	letter-spacing: 0.2em;
	color: #5a9;
	/* Emerald accent */
	text-transform: uppercase;
	margin-bottom: 10px;
	font-weight: 700;
	text-align: center;
	text-shadow: 0 0 8px rgba(90, 170, 153, 0.4);
}

#wave-timer .reward-list {
	display: flex;
	flex-direction: column;
	gap: 6px;
}

/* Landscape mode: 2-column grid for better space utilization */
@media (orientation: landscape) {
	#wave-timer .reward-list {
		display: grid;
		grid-template-columns: repeat(2, 1fr);
		gap: 5px 10px;
		width: 100%;
		max-width: 100%;
	}
	
	#wave-timer .wave-reward-container {
		padding: 10px 14px;
		max-width: 100%;
		width: 100%;
		box-sizing: border-box;
		overflow: visible;
	}
	
	#wave-timer {
		max-width: clamp(400px, 58vw, 540px);
		width: auto;
		min-width: 400px;
	}
	
	#wave-timer .reward-item {
		padding: 5px 8px;
		gap: 8px;
		min-width: 0;
		overflow: visible;
	}
	
	#wave-timer .reward-label {
		font-size: clamp(9px, 1.6vw, 11px);
		white-space: nowrap;
		overflow: visible;
		text-overflow: clip;
		flex: 1;
		min-width: 0;
	}
	
	#wave-timer .reward-value {
		font-size: clamp(9px, 1.6vw, 11px);
		min-width: 40px;
		white-space: nowrap;
		flex-shrink: 0;
	}
	
	#wave-timer .reward-icon {
		font-size: clamp(14px, 2.2vw, 16px);
		min-width: 18px;
		flex-shrink: 0;
	}
}

#wave-timer .reward-item {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 8px 10px;
	border-radius: 6px;
	background: rgba(15, 23, 42, 0.6);
	/* Darker background */
	border: 1px solid rgba(90, 170, 153, 0.2);
	transition: all 0.2s ease;
}

#wave-timer .reward-item:hover {
	background: rgba(20, 30, 48, 0.7);
	border-color: rgba(90, 170, 153, 0.4);
}

#wave-timer .reward-item.reward-special {
	background: rgba(90, 170, 153, 0.15);
	/* Emerald tint for special rewards */
	border-color: rgba(90, 170, 153, 0.5);
	box-shadow: 0 0 10px rgba(90, 170, 153, 0.2);
}

#wave-timer .reward-icon {
	font-size: clamp(16px, 3vw, 20px);
	min-width: 24px;
	text-align: center;
}

#wave-timer .reward-icon.hp-icon {
	color: #ef4444;
	/* Red for HP */
}

#wave-timer .reward-icon.energy-icon {
	color: #3b82f6;
	/* Blue for Energy */
}

#wave-timer .reward-icon.maxhp-icon {
	color: #22c55e;
	/* Green for Max HP */
}

#wave-timer .reward-icon.maxenergy-icon {
	color: #8b5cf6;
	/* Purple for Max Energy */
}

#wave-timer .reward-icon.cooling-icon {
	color: #22d3ee;
	/* Cyan for Cooling/Thermal Efficiency */
}

#wave-timer .reward-icon.revive-icon {
	color: #ec4899;
	/* Pink for Revive */
}

#wave-timer .reward-icon.drop-icon {
	color: #f59e0b;
	/* Amber for Drops */
}

#wave-timer .reward-label {
	flex: 1;
	font-size: clamp(10px, 2vw, 12px);
	color: #cbd5e1;
	/* Light gray */
	font-weight: 600;
	text-align: left;
}

#wave-timer .reward-value {
	font-size: clamp(11px, 2.2vw, 13px);
	font-weight: 700;
	color: #f8edde;
	text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
	min-width: 50px;
	text-align: right;
	font-family: 'Courier New', monospace;
	/* Monospace for proper × alignment */
	letter-spacing: 0.5px;
}

#wave-timer .reward-item.reward-positive .reward-value {
	color: #22c55e;
	/* Green for success */
}

#wave-timer .reward-item.reward-negative .reward-value {
	color: #94a3b8;
	/* Gray for failure */
}

/* Highlight for important values like max HP/energy increase */
#wave-timer .reward-value.reward-highlight {
	color: #4ade80;
	text-shadow: 0 0 8px rgba(74, 222, 128, 0.5);
	font-weight: 800;
}

/* Rare item drop styling */
#wave-timer .reward-item.reward-rare {
	background: linear-gradient(135deg, rgba(251, 191, 36, 0.15), rgba(245, 158, 11, 0.1));
	border-color: rgba(251, 191, 36, 0.5);
	box-shadow: 0 0 12px rgba(251, 191, 36, 0.25);
	animation: rareGlow 2s ease-in-out infinite;
}

/* Revive drop styling (milestone waves 3, 6, 9) */
#wave-timer .reward-item.reward-revive {
	background: linear-gradient(135deg, rgba(236, 72, 153, 0.2), rgba(168, 85, 247, 0.15));
	border-color: rgba(236, 72, 153, 0.6);
	box-shadow: 0 0 14px rgba(236, 72, 153, 0.35);
	animation: reviveGlow 2s ease-in-out infinite;
}

@keyframes reviveGlow {
	0%, 100% { box-shadow: 0 0 14px rgba(236, 72, 153, 0.35); }
	50% { box-shadow: 0 0 20px rgba(236, 72, 153, 0.55); }
}

@keyframes rareGlow {
	0%, 100% { box-shadow: 0 0 12px rgba(251, 191, 36, 0.25); }
	50% { box-shadow: 0 0 18px rgba(251, 191, 36, 0.4); }
}

#wave-timer .reward-score {
	margin-top: 8px;
	padding-top: 8px;
	border-top: 1px solid rgba(90, 170, 153, 0.3);
	text-align: center;
	font-size: clamp(11px, 2.2vw, 13px);
	color: #fcd34d;
	/* Gold */
	font-weight: 700;
	letter-spacing: 0.05em;
	text-shadow: 0 0 8px rgba(252, 211, 77, 0.3);
}

#wave-timer .reward-perfect {
	margin-top: 6px;
	text-align: center;
	font-size: clamp(10px, 2vw, 11px);
	color: #fbbf24;
	/* Amber */
	font-weight: 700;
	letter-spacing: 0.1em;
	text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
	animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
	0%, 100% {
		opacity: 1;
		transform: scale(1);
	}
	50% {
		opacity: 0.8;
		transform: scale(1.05);
	}
}

#wave-timer .resupply-title {
	font-size: 10px;
	letter-spacing: 0.2em;
	color: #8df7ff;
	text-transform: uppercase;
	margin-bottom: 8px;
	font-weight: 700;
	text-align: center;
}

#wave-timer .resupply-stats {
	display: flex;
	justify-content: space-around;
	gap: 8px;
}

#wave-timer .resupply-item {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 3px;
	flex: 1;
	padding: 6px 4px;
	border-radius: 6px;
	background: rgba(255, 255, 255, 0.03);
	border: 1px solid rgba(255, 255, 255, 0.08);
}

#wave-timer .resupply-icon {
	font-size: 16px;
	opacity: 0.9;
}

#wave-timer .resupply-value {
	font-size: 13px;
	font-weight: 700;
	color: #f8edde;
	text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

#wave-timer .resupply-item.reward-positive .resupply-value {
	color: #22c55e;
}

#wave-timer .resupply-item.reward-negative .resupply-value {
	color: #a4917a;
}

#wave-timer .resupply-bonus {
	margin-top: 6px;
	text-align: center;
	font-size: 11px;
	color: #fcd34d;
	font-weight: 700;
	letter-spacing: 0.05em;
}

#wave-timer .wave-reward-notes-list li::marker {
	color: #f59e0b;
}

/* Hide HUD during wave reward popup - Battlefield style */
body.intermission-blur .hud-top,
body.intermission-blur #boss-warning,
body.intermission-blur .controls-area,
body.intermission-blur .keyboard-hint,
body.intermission-blur #achievement-popup-container,
body.intermission-blur .ability-btn,
body.intermission-blur #ult-btn,
body.intermission-blur #turbo-btn,
body.intermission-blur #lifesteal-timer,
body.intermission-blur #magnet-timer,
body.intermission-blur .stats-panel,
body.intermission-blur .top-right,
body.intermission-blur #minimap,
body.intermission-blur .minimap-box {
	opacity: 0;
	pointer-events: none;
	transition: opacity 0.25s ease;
}

/* Keep canvas slightly blurred for focus effect */
body.intermission-blur #gameCanvas {
	filter: blur(3px);
	transition: filter 0.25s ease;
}

/* Wave reward popup and wave indicator stay visible during intermission */
body.intermission-blur #wave-timer,
body.intermission-blur #wave-indicator {
	opacity: 1 !important;
	pointer-events: auto;
	filter: none;
}

/* Hide HUD whenever achievements overlay is shown */
body.achievements-open #ui-layer,
body.achievements-open .hud-top,
body.achievements-open #boss-warning,
body.achievements-open .controls-area,
body.achievements-open .keyboard-hint,
body.achievements-open #achievement-popup-container,
body.achievements-open #wave-indicator,
body.achievements-open #wave-timer,
body.achievements-open #lifesteal-timer,
body.achievements-open #magnet-timer,
body.achievements-open .ability-btn,
body.achievements-open #ult-btn,
body.achievements-open #turbo-btn {
	opacity: 0 !important;
	pointer-events: none !important;
	transition: opacity 0.25s ease;
}

/* Make TOP HUD elements transparent when achievement popup notification is showing */
/* Only affects top-screen HUD (stats, minimap, wave indicator) - NOT bottom controls */
/* Uses !important to override any inline styles or JS-set opacity values */
body.achievement-popup-showing .hud-top,
body.achievement-popup-showing .hud-top *,
body.achievement-popup-showing #wave-indicator,
body.achievement-popup-showing #wave-timer,
body.achievement-popup-showing #pause-btn,
body.achievement-popup-showing .minimap-container,
body.achievement-popup-showing #minimap {
	opacity: 0.25 !important;
	transition: opacity 0.3s ease !important;
}

/* CRITICAL: Force hide boss-warning during achievement popup with highest priority */
/* This overrides inline JS opacity settings using !important */
body.achievement-popup-showing #boss-warning {
	opacity: 0 !important;
	visibility: hidden !important;
	transition: none !important;
}

/* =======================================================
   PORTRAIT MODE SCORE OVERRIDES - MUST BE AT END OF FILE
   This ensures portrait rules win over landscape rules
   Using maximum specificity with html body #id selectors
   ======================================================= */
@media (orientation: portrait) {
	/* High Score sizing by digit count - maximum specificity */
	html body #high-scores-list .score-card.score-card-high .score-number.score-number-high.digits-small {
		font-size: clamp(52px, 16vw, 72px) !important;
		letter-spacing: 2px !important;
	}
	html body #high-scores-list .score-card.score-card-high .score-number.score-number-high.digits-normal {
		font-size: clamp(44px, 14vw, 62px) !important;
		letter-spacing: 1.5px !important;
	}
	html body #high-scores-list .score-card.score-card-high .score-number.score-number-high.digits-medium {
		font-size: clamp(34px, 11vw, 50px) !important;
		letter-spacing: 1px !important;
	}
	html body #high-scores-list .score-card.score-card-high .score-number.score-number-high.digits-large {
		font-size: clamp(26px, 8.5vw, 40px) !important;
		letter-spacing: 0.5px !important;
	}
	html body #high-scores-list .score-card.score-card-high .score-number.score-number-high.digits-xlarge {
		font-size: clamp(20px, 6.5vw, 32px) !important;
		letter-spacing: 0 !important;
	}
	
	/* Last Score sizing by digit count - maximum specificity */
	html body #high-scores-list .score-card.score-card-last .score-number.score-number-last.digits-small {
		font-size: clamp(52px, 16vw, 72px) !important;
		letter-spacing: 2px !important;
	}
	html body #high-scores-list .score-card.score-card-last .score-number.score-number-last.digits-normal {
		font-size: clamp(44px, 14vw, 62px) !important;
		letter-spacing: 1.5px !important;
	}
	html body #high-scores-list .score-card.score-card-last .score-number.score-number-last.digits-medium {
		font-size: clamp(34px, 11vw, 50px) !important;
		letter-spacing: 1px !important;
	}
	html body #high-scores-list .score-card.score-card-last .score-number.score-number-last.digits-large {
		font-size: clamp(26px, 8.5vw, 40px) !important;
		letter-spacing: 0.5px !important;
	}
	html body #high-scores-list .score-card.score-card-last .score-number.score-number-last.digits-xlarge {
		font-size: clamp(20px, 6.5vw, 32px) !important;
		letter-spacing: 0 !important;
	}
}

/* =====================================================================
   DEMO MODE - Realistic gameplay showcase on main menu
   ===================================================================== */

/* When demo is active, show game canvas for demo rendering */
body.demo-active #gameCanvas {
	opacity: 1;
	z-index: 5; /* Below overlay but visible */
}

/* Hide the old demo canvas when using new demo system */
body.demo-active #demoCanvas {
	display: none !important;
}

/* Hide all HUD elements during demo mode */
body.demo-active #ui-layer {
	opacity: 0 !important;
	pointer-events: none !important;
}

/* Keep overlay visible above demo */

/* =====================================================================
   FPS HUD - Elegant military theme with glassmorphism backdrop blur
   ===================================================================== */

.fps-hud {
	position: fixed;
	bottom: 12px;
	left: 50%;
	transform: translateX(-50%);
	z-index: 9999;
	
	/* Minimal glassmorphism background */
	background: rgba(30, 25, 20, 0.65);
	backdrop-filter: blur(6px);
	-webkit-backdrop-filter: blur(6px);
	
	/* Ultra-compact styling */
	padding: 2px 8px;
	border-radius: 3px;
	border: 1px solid rgba(139, 115, 85, 0.5);
	box-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
	
	/* Text styling */
	font-family: 'Rajdhani', 'Consolas', monospace;
	font-size: 9px;
	font-weight: 600;
	letter-spacing: 0.2px;
	white-space: nowrap;
	line-height: 1.1;
	
	/* Flex layout for evenly spaced content */
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 0;
	
	/* Prevent interaction */
	pointer-events: none;
	user-select: none;
	
	/* Smooth transitions */
	transition: border-color 0.3s ease, box-shadow 0.3s ease, opacity 0.3s ease;
}

/* FPS value - color coded dynamically via JS */
.fps-hud .fps-value {
	color: #a3e635;
	min-width: 32px;
	text-align: center;
	text-shadow: 0 0 4px rgba(163, 230, 53, 0.4);
	transition: color 0.3s ease, text-shadow 0.3s ease;
}

/* Separator styling - subtle and compact */
.fps-hud .fps-separator {
	color: rgba(139, 115, 85, 0.35);
	margin: 0 4px;
	font-weight: 400;
	font-size: 8px;
}

/* Average FPS - muted tan */
.fps-hud .fps-avg {
	color: rgba(212, 197, 176, 0.8);
	min-width: 30px;
	text-align: center;
}

/* Frame time in ms - subtle */
.fps-hud .fps-ms {
	color: rgba(168, 153, 138, 0.75);
	min-width: 32px;
	text-align: center;
}

/* ===== FPS COLOR STATES ===== */

/* Excellent (60+ FPS) - Green */
.fps-hud.fps-excellent .fps-value {
	color: #a3e635;
	text-shadow: 0 0 6px rgba(163, 230, 53, 0.4);
}
.fps-hud.fps-excellent {
	border-color: rgba(139, 115, 85, 0.5);
}

/* Caution (45-55 FPS) - Amber */
.fps-hud.fps-caution .fps-value {
	color: #eab308;
	text-shadow: 0 0 6px rgba(234, 179, 8, 0.4);
}
.fps-hud.fps-caution {
	border-color: rgba(234, 179, 8, 0.4);
}

/* Warning (30-45 FPS) - Orange */
.fps-hud.fps-warning .fps-value {
	color: #f97316;
	text-shadow: 0 0 6px rgba(249, 115, 22, 0.4);
}
.fps-hud.fps-warning {
	border-color: rgba(249, 115, 22, 0.45);
}

/* Critical (<30 FPS) - Red */
.fps-hud.fps-critical .fps-value {
	color: #ef4444;
	text-shadow: 0 0 8px rgba(239, 68, 68, 0.5);
}
.fps-hud.fps-critical {
	border-color: rgba(239, 68, 68, 0.5);
}

/* Hide during demo mode */
body.demo-active .fps-hud {
	display: none !important;
}

/* ===== HOMEPAGE HOLD-TO-HIDE FEATURE ===== */
/* When user holds background, hide all UI to enjoy the demo battle */

/* Base transition for overlay - needed for smooth return from hidden state */
#overlay {
	transition: background 0.5s cubic-bezier(0.4, 0, 0.2, 1),
	            backdrop-filter 0.5s cubic-bezier(0.4, 0, 0.2, 1),
	            -webkit-backdrop-filter 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Overlay content wrapper for smooth hide animation */
#overlay > * {
	transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
	            transform 0.6s cubic-bezier(0.4, 0, 0.2, 1),
	            filter 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hidden state - all content fades and blurs with smooth animation */
#overlay.content-hidden > * {
	opacity: 0;
	transform: scale(0.88) translateY(-15px);
	filter: blur(16px);
	pointer-events: none;
}

/* Overlay background transitions smoothly when content hidden */
#overlay.content-hidden {
	background: rgba(20, 18, 15, 0.02) !important;
	backdrop-filter: blur(0px) !important;
	-webkit-backdrop-filter: blur(0px) !important;
	transition: background 0.5s ease-out, backdrop-filter 0.5s ease-out;
}

/* Hint popup box that appears when content is hidden */
#overlay .hold-hint {
	position: absolute;
	bottom: clamp(50px, 10vh, 100px);
	left: 50%;
	transform: translateX(-50%) translateY(20px) scale(0.9);
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(0.75rem, 2.2vw, 0.95rem);
	font-weight: 600;
	color: rgba(212, 197, 176, 0);
	letter-spacing: 0.18em;
	text-transform: uppercase;
	padding: 12px 24px;
	background: rgba(30, 27, 22, 0);
	border: 1.5px solid rgba(139, 115, 85, 0);
	border-radius: 6px;
	pointer-events: none;
	opacity: 0;
	transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
	white-space: nowrap;
}

/* Hint popup visible state - smooth slide up and scale */
#overlay.content-hidden .hold-hint {
	color: rgba(235, 220, 195, 0.95);
	background: linear-gradient(
		135deg,
		rgba(40, 35, 28, 0.92) 0%,
		rgba(30, 27, 22, 0.88) 100%
	);
	border-color: rgba(180, 150, 100, 0.55);
	backdrop-filter: blur(16px) saturate(1.2);
	-webkit-backdrop-filter: blur(16px) saturate(1.2);
	opacity: 1;
	transform: translateX(-50%) translateY(0) scale(1);
	box-shadow: 
		0 8px 32px rgba(0, 0, 0, 0.5),
		0 0 40px rgba(139, 115, 85, 0.2),
		0 0 80px rgba(139, 115, 85, 0.1),
		inset 0 1px 0 rgba(255, 255, 255, 0.12),
		inset 0 -1px 0 rgba(0, 0, 0, 0.2);
	text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

/* Subtle pulse animation when hint is visible */
@keyframes hint-pulse {
	0%, 100% {
		box-shadow: 
			0 8px 32px rgba(0, 0, 0, 0.5),
			0 0 40px rgba(139, 115, 85, 0.2),
			0 0 80px rgba(139, 115, 85, 0.1),
			inset 0 1px 0 rgba(255, 255, 255, 0.12),
			inset 0 -1px 0 rgba(0, 0, 0, 0.2);
	}
	50% {
		box-shadow: 
			0 10px 40px rgba(0, 0, 0, 0.55),
			0 0 50px rgba(180, 150, 100, 0.3),
			0 0 100px rgba(139, 115, 85, 0.15),
			inset 0 1px 0 rgba(255, 255, 255, 0.15),
			inset 0 -1px 0 rgba(0, 0, 0, 0.2);
	}
}

#overlay.content-hidden .hold-hint {
	animation: hint-pulse 2.5s ease-in-out infinite;
}

/* Override parent transitions for hint element */
#overlay .hold-hint {
	/* Using !important to ensure hint isn't affected by content-hidden parent rules */
	filter: none !important;
}

/* =====================================================================
   DEMO BENCHMARK HUD - Comprehensive performance monitor for homepage demo
   Shows when user holds on homepage background for benchmarking
   ===================================================================== */

.demo-benchmark-hud {
	position: fixed;
	bottom: clamp(140px, 22vh, 220px);
	left: 50%;
	transform: translateX(-50%) translateY(20px) scale(0.9);
	z-index: 99999;
	
	/* Glassmorphism design - matches hold-hint style */
	background: linear-gradient(
		135deg,
		rgba(40, 35, 28, 0.92) 0%,
		rgba(30, 27, 22, 0.88) 100%
	);
	backdrop-filter: blur(16px) saturate(1.2);
	-webkit-backdrop-filter: blur(16px) saturate(1.2);
	
	/* Styling */
	padding: 12px 20px 10px;
	border-radius: 8px;
	border: 1.5px solid rgba(139, 115, 85, 0);
	box-shadow: none;
	
	/* Typography */
	font-family: 'Rajdhani', 'Consolas', monospace;
	color: rgba(212, 197, 176, 0);
	
	/* Hidden by default */
	opacity: 0;
	pointer-events: none;
	
	/* Smooth transitions - matches hold-hint timing */
	transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Active state - when benchmark mode is on */
.demo-benchmark-hud.active {
	opacity: 1;
	color: rgba(212, 197, 176, 0.95);
	border-color: rgba(180, 150, 100, 0.55);
	transform: translateX(-50%) translateY(0) scale(1);
	box-shadow: 
		0 8px 32px rgba(0, 0, 0, 0.5),
		0 0 40px rgba(139, 115, 85, 0.2),
		0 0 80px rgba(139, 115, 85, 0.1),
		inset 0 1px 0 rgba(255, 255, 255, 0.12),
		inset 0 -1px 0 rgba(0, 0, 0, 0.2);
	animation: benchmark-pulse 2.5s ease-in-out infinite;
}

/* Subtle pulse animation - matches hold-hint pulse */
@keyframes benchmark-pulse {
	0%, 100% {
		box-shadow: 
			0 8px 32px rgba(0, 0, 0, 0.5),
			0 0 40px rgba(139, 115, 85, 0.2),
			0 0 80px rgba(139, 115, 85, 0.1),
			inset 0 1px 0 rgba(255, 255, 255, 0.12),
			inset 0 -1px 0 rgba(0, 0, 0, 0.2);
	}
	50% {
		box-shadow: 
			0 10px 40px rgba(0, 0, 0, 0.55),
			0 0 50px rgba(180, 150, 100, 0.3),
			0 0 100px rgba(139, 115, 85, 0.15),
			inset 0 1px 0 rgba(255, 255, 255, 0.15),
			inset 0 -1px 0 rgba(0, 0, 0, 0.2);
	}
}

/* Mobile responsive position adjustment */
@media (max-height: 600px) {
	.demo-benchmark-hud {
		bottom: clamp(100px, 15vh, 140px);
	}
}

/* Landscape mode - move benchmark box higher to avoid UI overlap */
@media (orientation: landscape) and (max-height: 500px) {
	.demo-benchmark-hud {
		bottom: auto;
		top: 50%;
		transform: translateX(-50%) translateY(-50%) scale(0.9);
	}
	
	.demo-benchmark-hud.active {
		transform: translateX(-50%) translateY(-50%) scale(1);
	}
}

/* Header container */
.demo-benchmark-hud .benchmark-header {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 6px;
	margin-bottom: 10px;
	padding-bottom: 10px;
	border-bottom: 1px solid rgba(139, 115, 85, 0.3);
}

/* Title */
.demo-benchmark-hud .benchmark-title {
	font-size: 10px;
	font-weight: 700;
	letter-spacing: 0.25em;
	text-transform: uppercase;
	color: rgba(139, 195, 74, 0.9);
	text-align: center;
	text-shadow: 0 0 8px rgba(139, 195, 74, 0.3);
}

/* Quality container */
.demo-benchmark-hud .benchmark-quality {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 8px;
	width: 100%;
}

/* Quality badge */
.demo-benchmark-hud .quality-badge {
	font-size: 11px;
	font-weight: 700;
	letter-spacing: 0.1em;
	padding: 3px 10px;
	border-radius: 4px;
	background: linear-gradient(135deg, rgba(139, 195, 74, 0.25), rgba(139, 195, 74, 0.15));
	border: 1px solid rgba(139, 195, 74, 0.4);
	color: #a3e635;
	text-shadow: 0 0 6px rgba(139, 195, 74, 0.4);
}

/* Quality badge colors by level */
.demo-benchmark-hud .quality-badge.quality-ultra {
	background: linear-gradient(135deg, rgba(139, 195, 74, 0.25), rgba(139, 195, 74, 0.15));
	border-color: rgba(139, 195, 74, 0.4);
	color: #a3e635;
}
.demo-benchmark-hud .quality-badge.quality-high {
	background: linear-gradient(135deg, rgba(34, 197, 94, 0.25), rgba(34, 197, 94, 0.15));
	border-color: rgba(34, 197, 94, 0.4);
	color: #22c55e;
}
.demo-benchmark-hud .quality-badge.quality-medium {
	background: linear-gradient(135deg, rgba(234, 179, 8, 0.25), rgba(234, 179, 8, 0.15));
	border-color: rgba(234, 179, 8, 0.4);
	color: #eab308;
}
.demo-benchmark-hud .quality-badge.quality-low {
	background: linear-gradient(135deg, rgba(249, 115, 22, 0.25), rgba(249, 115, 22, 0.15));
	border-color: rgba(249, 115, 22, 0.4);
	color: #f97316;
}
.demo-benchmark-hud .quality-badge.quality-verylow {
	background: linear-gradient(135deg, rgba(239, 68, 68, 0.25), rgba(239, 68, 68, 0.15));
	border-color: rgba(239, 68, 68, 0.4);
	color: #ef4444;
}
.demo-benchmark-hud .quality-badge.quality-emergency {
	background: linear-gradient(135deg, rgba(220, 38, 38, 0.3), rgba(220, 38, 38, 0.2));
	border-color: rgba(220, 38, 38, 0.5);
	color: #dc2626;
	animation: emergency-pulse 1s ease-in-out infinite;
}

@keyframes emergency-pulse {
	0%, 100% { opacity: 1; }
	50% { opacity: 0.7; }
}

/* Quality level text */
.demo-benchmark-hud .quality-level {
	font-size: 9px;
	font-weight: 500;
	color: rgba(168, 153, 138, 0.7);
	letter-spacing: 0.05em;
}

/* Stats container */
.demo-benchmark-hud .benchmark-stats {
	display: grid;
	grid-template-columns: repeat(5, 1fr);
	gap: 12px;
	text-align: center;
}

/* Individual stat row */
.demo-benchmark-hud .benchmark-row {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 2px;
}

/* Stat label */
.demo-benchmark-hud .benchmark-label {
	font-size: 8px;
	font-weight: 600;
	letter-spacing: 0.15em;
	color: rgba(168, 153, 138, 0.7);
	text-transform: uppercase;
}

/* Stat value */
.demo-benchmark-hud .benchmark-value {
	font-size: 14px;
	font-weight: 700;
	color: rgba(212, 197, 176, 0.95);
	min-width: 36px;
}

/* FPS value color coding */
.demo-benchmark-hud .benchmark-value.fps-value {
	color: #a3e635;
	text-shadow: 0 0 6px rgba(163, 230, 53, 0.4);
}

.demo-benchmark-hud .benchmark-value.fps-value.fps-caution {
	color: #eab308;
	text-shadow: 0 0 6px rgba(234, 179, 8, 0.4);
}

.demo-benchmark-hud .benchmark-value.fps-value.fps-warning {
	color: #f97316;
	text-shadow: 0 0 6px rgba(249, 115, 22, 0.4);
}

.demo-benchmark-hud .benchmark-value.fps-value.fps-critical {
	color: #ef4444;
	text-shadow: 0 0 6px rgba(239, 68, 68, 0.4);
}

/* Footer container */
.demo-benchmark-hud .benchmark-footer {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 8px;
	margin-top: 10px;
	padding-top: 8px;
	border-top: 1px solid rgba(139, 115, 85, 0.2);
}

/* Resolution label */
.demo-benchmark-hud .benchmark-resolution-label {
	font-size: 8px;
	font-weight: 600;
	letter-spacing: 0.15em;
	color: rgba(168, 153, 138, 0.5);
	text-transform: uppercase;
}

/* Resolution value */
.demo-benchmark-hud .benchmark-resolution {
	font-size: 10px;
	font-weight: 600;
	letter-spacing: 0.05em;
	color: rgba(212, 197, 176, 0.8);
}

/* Mobile responsive */
@media (max-width: 480px) {
	.demo-benchmark-hud {
		padding: 10px 14px 8px;
		bottom: clamp(120px, 18vh, 160px);
	}
	
	.demo-benchmark-hud .benchmark-stats {
		gap: 8px;
	}
	
	.demo-benchmark-hud .benchmark-value {
		font-size: 12px;
	}
	
	.demo-benchmark-hud .benchmark-label {
		font-size: 7px;
	}
	
	.demo-benchmark-hud .benchmark-header {
		gap: 4px;
		margin-bottom: 8px;
		padding-bottom: 8px;
	}
	
	.demo-benchmark-hud .quality-badge {
		font-size: 10px;
		padding: 2px 8px;
	}
}

/* Landscape mode - adjusted spacing and positioning */
@media (orientation: landscape) and (max-height: 600px) {
	.demo-benchmark-hud {
		bottom: clamp(80px, 12vh, 120px);
		padding: 8px 16px 6px;
	}
	
	.demo-benchmark-hud .benchmark-stats {
		gap: 16px;
	}
	
	.demo-benchmark-hud .benchmark-header {
		gap: 4px;
		margin-bottom: 6px;
		padding-bottom: 6px;
	}
	
	.demo-benchmark-hud .benchmark-value {
		font-size: 12px;
	}
	
	.demo-benchmark-hud .benchmark-label {
		font-size: 7px;
	}
	
	.demo-benchmark-hud .benchmark-footer {
		margin-top: 6px;
		padding-top: 6px;
	}
}

/* =============================================================================
   SETTINGS SCREEN - Full Screen Dramatic Military Style (like Achievements)
   ============================================================================= */

#settings-screen {
	position: fixed;
	inset: 0;
	background: 
		radial-gradient(ellipse at top, rgba(139, 195, 74, 0.08) 0%, transparent 50%),
		radial-gradient(ellipse at bottom, rgba(251, 146, 60, 0.06) 0%, transparent 50%),
		linear-gradient(180deg, rgba(20, 18, 15, 0.99) 0%, rgba(35, 30, 25, 0.98) 50%, rgba(25, 22, 18, 0.99) 100%);
	z-index: 9999;
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: clamp(20px, 4vh, 50px) clamp(15px, 4vw, 30px);
	overflow-y: auto;
	overflow-x: hidden;
	-webkit-overflow-scrolling: touch;
	overscroll-behavior: contain;
	touch-action: pan-y;
}

@keyframes settingsFadeOut {
	from {
		opacity: 1;
	}
	to {
		opacity: 0;
	}
}

#settings-screen.closing {
	animation: settingsFadeOut 0.3s ease-out forwards;
	pointer-events: none;
}

#settings-screen.closing .settings-container {
	animation: settingsSlideOut 0.3s ease-out forwards;
}

@keyframes settingsSlideOut {
	from {
		transform: translateY(0);
		opacity: 1;
	}
	to {
		transform: translateY(30px);
		opacity: 0;
	}
}

/* Custom scrollbar for settings screen - matches achievement screen */
#settings-screen::-webkit-scrollbar {
	width: 8px;
}

#settings-screen::-webkit-scrollbar-track {
	background: rgba(0, 0, 0, 0.3);
}

#settings-screen::-webkit-scrollbar-thumb {
	background: rgba(139, 115, 85, 0.6);
	border-radius: 4px;
}

#settings-screen::-webkit-scrollbar-thumb:hover {
	background: rgba(139, 115, 85, 0.8);
}

/* Decorative top border glow for settings */
#settings-screen::before {
	content: '';
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	height: 3px;
	background: linear-gradient(90deg, 
		transparent 0%, 
		#8bc34a 20%, 
		#facc15 50%, 
		#8bc34a 80%, 
		transparent 100%);
	box-shadow: 0 0 20px rgba(139, 195, 74, 0.5), 0 0 40px rgba(139, 195, 74, 0.3);
	z-index: 10000;
}

.settings-container {
	width: 100%;
	max-width: 600px;
	animation: settingsSlideIn 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes settingsSlideIn {
	from {
		transform: translateY(30px);
		opacity: 0;
	}
	to {
		transform: translateY(0);
		opacity: 1;
	}
}

.settings-header {
	text-align: center;
	margin-bottom: clamp(20px, 4vh, 40px);
	position: relative;
}

.settings-title {
	font-family: 'Black Ops One', 'Rajdhani', sans-serif;
	font-size: clamp(1.8rem, 6vw, 2.8rem);
	color: transparent;
	background: linear-gradient(180deg, #e8dcc8 0%, #c4b59a 50%, #a89880 100%);
	-webkit-background-clip: text;
	background-clip: text;
	letter-spacing: 0.2em;
	text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
	margin-bottom: 12px;
	position: relative;
}

.settings-title::after {
	content: '';
	position: absolute;
	bottom: -8px;
	left: 50%;
	transform: translateX(-50%);
	width: 60%;
	height: 2px;
	background: linear-gradient(90deg, transparent, rgba(139, 195, 74, 0.6), transparent);
}

.settings-subtitle {
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(0.8rem, 2.5vw, 1rem);
	color: rgba(168, 153, 138, 0.9);
	letter-spacing: 0.25em;
	text-transform: uppercase;
	margin-top: 16px;
}

.settings-content {
	padding: 0;
}

.settings-section {
	margin-bottom: clamp(24px, 4vh, 40px);
	background: linear-gradient(145deg, rgba(45, 40, 35, 0.6), rgba(30, 28, 25, 0.7));
	border: 1px solid rgba(139, 115, 85, 0.3);
	border-radius: 12px;
	padding: clamp(16px, 3vw, 24px);
	box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.section-title {
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(0.8rem, 2.5vw, 1rem);
	font-weight: 700;
	color: rgba(139, 195, 74, 0.95);
	letter-spacing: 0.2em;
	text-transform: uppercase;
	margin-bottom: 16px;
	padding-bottom: 10px;
	border-bottom: 1px solid rgba(139, 195, 74, 0.25);
}

/* Quality Presets Grid */
.quality-presets {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	gap: clamp(10px, 2vw, 16px);
}

@media (max-width: 480px) {
	.quality-presets {
		grid-template-columns: repeat(2, 1fr);
	}
}

.preset-btn {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 6px;
	padding: clamp(14px, 3vw, 20px) clamp(10px, 2vw, 16px);
	background: linear-gradient(145deg, rgba(55, 50, 45, 0.9), rgba(40, 35, 30, 0.95));
	border: 2px solid rgba(139, 115, 85, 0.35);
	border-radius: 12px;
	cursor: pointer;
	transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
	user-select: none;
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
}

.preset-btn:hover {
	background: linear-gradient(145deg, rgba(75, 65, 55, 0.95), rgba(55, 50, 45, 0.98));
	border-color: rgba(139, 115, 85, 0.7);
	transform: translateY(-3px);
	box-shadow: 0 8px 25px rgba(0, 0, 0, 0.35);
}

.preset-btn:active {
	transform: scale(0.97);
}

.preset-btn.active {
	background: linear-gradient(145deg, rgba(139, 195, 74, 0.3), rgba(100, 150, 50, 0.2));
	border-color: rgba(139, 195, 74, 0.8);
	box-shadow: 
		0 0 25px rgba(139, 195, 74, 0.25), 
		0 4px 15px rgba(0, 0, 0, 0.3),
		inset 0 0 15px rgba(139, 195, 74, 0.1);
}

.preset-icon {
	font-size: clamp(1.6rem, 4vw, 2rem);
	line-height: 1;
	filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.preset-name {
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(0.75rem, 2.5vw, 0.95rem);
	font-weight: 700;
	color: #d4c5b0;
	letter-spacing: 0.12em;
	text-transform: uppercase;
}

.preset-btn.active .preset-name {
	color: #a3e635;
}

.preset-desc {
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(0.55rem, 1.5vw, 0.65rem);
	color: rgba(168, 153, 138, 0.7);
	text-transform: uppercase;
	letter-spacing: 0.05em;
}

/* Settings Info Display */
.settings-info {
	background: rgba(30, 25, 20, 0.6);
	border: 1px solid rgba(139, 115, 85, 0.2);
	border-radius: 8px;
	padding: 12px 16px;
}

.setting-row {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 8px 0;
	border-bottom: 1px solid rgba(139, 115, 85, 0.1);
}

.setting-row:last-child {
	border-bottom: none;
}

.setting-label {
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(0.7rem, 2vw, 0.85rem);
	color: rgba(168, 153, 138, 0.9);
}

.setting-value {
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(0.7rem, 2vw, 0.85rem);
	font-weight: 600;
	color: #a3e635;
	text-transform: uppercase;
}

/* Back Button */
.settings-back-btn {
	width: 100%;
	max-width: 400px;
	margin: clamp(20px, 4vh, 40px) auto 0;
	padding: clamp(14px, 3vw, 18px) clamp(24px, 5vw, 40px);
	background: linear-gradient(135deg, #4a6741, #5a7a50);
	border: 3px solid #6b8055;
	border-radius: 10px;
	color: #d4c5b0;
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(1rem, 3vw, 1.2rem);
	font-weight: 700;
	letter-spacing: 0.2em;
	cursor: pointer;
	transition: all 0.25s ease;
	text-transform: uppercase;
	box-shadow: 
		0 4px 20px rgba(0, 0, 0, 0.4),
		inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.settings-back-btn:hover {
	background: linear-gradient(135deg, #5a7a50, #6b8a60);
	transform: translateY(-3px);
	box-shadow: 
		0 8px 30px rgba(0, 0, 0, 0.5),
		0 0 20px rgba(139, 195, 74, 0.2);
	border-color: #7a9565;
}

.settings-back-btn:active {
	transform: scale(0.97);
}

/* Settings Button (next to mute) */
.settings-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 32px;
	height: 32px;
	background: linear-gradient(135deg, rgba(70, 60, 50, 0.6), rgba(50, 40, 30, 0.8));
	border: 2px solid rgba(139, 115, 85, 0.5);
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.15s ease;
	user-select: none;
}

.settings-btn:hover {
	background: linear-gradient(135deg, rgba(90, 80, 70, 0.7), rgba(70, 60, 50, 0.9));
	border-color: rgba(139, 115, 85, 0.8);
	transform: scale(1.05);
}

.settings-btn:active {
	transform: scale(0.95);
}

.settings-btn.pushed {
	transform: scale(0.85);
	transition: transform 0.1s ease;
}

.settings-icon {
	font-size: 16px;
	line-height: 1;
	transition: transform 0.3s ease;
}

.settings-btn:hover .settings-icon {
	transform: rotate(45deg);
}

/* =============================================================================
   MUSIC START HINT - Centered horizontally at same height as mute
   ============================================================================= */

.music-start-hint-container {
	position: fixed;
	bottom: clamp(12px, 3vh, 25px);
	left: 50%;
	transform: translateX(-50%);
	z-index: 100;
	pointer-events: none;
	animation: hintFadeIn 0.5s ease-out;
}

.music-start-hint-container.hidden {
	opacity: 0;
	transform: translateX(-50%) translateY(10px) scale(0.9);
	pointer-events: none;
	transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes hintFadeIn {
	from {
		opacity: 0;
		transform: translateX(-50%) translateY(10px) scale(0.9);
	}
	to {
		opacity: 1;
		transform: translateX(-50%) translateY(0) scale(1);
	}
}

.music-start-hint-box {
	display: flex;
	align-items: center;
	padding: 6px 14px;
	background: linear-gradient(135deg, 
		rgba(255, 200, 50, 0.2) 0%, 
		rgba(255, 150, 0, 0.12) 100%);
	border: 1px solid rgba(255, 200, 50, 0.5);
	border-radius: 16px;
	animation: hintPulse 2s ease-in-out infinite, hintGlow 1.5s ease-in-out infinite alternate;
	box-shadow: 
		0 0 10px rgba(255, 200, 50, 0.2),
		0 0 20px rgba(255, 150, 0, 0.1),
		0 4px 12px rgba(0, 0, 0, 0.2),
		inset 0 1px 0 rgba(255, 255, 255, 0.15);
	backdrop-filter: blur(6px);
}

@keyframes hintPulse {
	0%, 100% {
		transform: scale(1);
		opacity: 1;
	}
	50% {
		transform: scale(1.03);
		opacity: 0.92;
	}
}

@keyframes hintGlow {
	0% {
		box-shadow: 
			0 0 10px rgba(255, 200, 50, 0.2),
			0 0 20px rgba(255, 150, 0, 0.1),
			0 4px 12px rgba(0, 0, 0, 0.2),
			inset 0 1px 0 rgba(255, 255, 255, 0.15);
		border-color: rgba(255, 200, 50, 0.5);
	}
	100% {
		box-shadow: 
			0 0 15px rgba(255, 200, 50, 0.35),
			0 0 30px rgba(255, 150, 0, 0.15),
			0 4px 12px rgba(0, 0, 0, 0.2),
			inset 0 1px 0 rgba(255, 255, 255, 0.2);
		border-color: rgba(255, 220, 100, 0.7);
	}
}

.music-start-hint-box .hint-text {
	font-family: 'Rajdhani', sans-serif;
	font-size: clamp(0.6rem, 1.8vw, 0.75rem);
	font-weight: 600;
	color: rgba(255, 230, 150, 0.95);
	text-transform: uppercase;
	letter-spacing: 0.08em;
	text-shadow: 
		0 1px 2px rgba(0, 0, 0, 0.5),
		0 0 10px rgba(255, 200, 50, 0.3);
	white-space: nowrap;
}

/* Hide quality-level in benchmark HUD (only show badge) */
.demo-benchmark-hud .quality-level {
	display: none;
}